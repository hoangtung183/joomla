<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" xml:lang="vi" lang="vi"><head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="content-style-type" content="text/css">
<meta http-equiv="content-language" content="vi">
<meta http-equiv="imagetoolbar" content="no">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="revisit-after" content="1 days">
<meta name="copyright" content="2000, 2002, 2005, 2007 phpBB Group">
<meta name="robots" content="INDEX,FOLLOW,ALL">
<meta name="keywords" content="Trong, thực, tế, các, lập, trình, viên, thường, phải, sử, dụng, những, kỹ, thuật, đệ, qui, mảng, database, để, xử, lý, category, hay, menu, đa, cấp, và, các, lập, trình, viên, để, biết, được, ưu, điểm, và, nhược, điểm, của, kỹ, thuật, này, , ">
<meta name="description" content="Trong thực tế các lập trình viên thường phải sử dụng những kỹ thuật đệ qui mảng, database để xử lý category hay menu đa cấp, và các lập trình viên để biết được ưu điểm và nhược điểm của kỹ thuật này. Với kỹ thuật để qui để tạo category hay menu đa cấp thường rất dễ dàng xử lý bằng kỹ thuật nhưng nó bị hạn chế về tốc độ duyệt. Nếu dữ liệu của category hay menu trong database càng lớn thì tốc độ duyệt và hiển thị càng chậm.  Để khắc phục điều này thì hiện nay người ta thườ">
<meta name="title" content="[Tutorial]Tạo category, menu đa cấp với cấu trúc cây">
<meta itemprop="name" content="[Tutorial]Tạo category, menu đa cấp với cấu trúc cây">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">


<title>[Tutorial]Tạo category, menu đa cấp với cấu trúc cây | Zend 
Framework | PHP Framework | Zend PHP | ZendVN | Open Source | Vietnam</title>

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:      
	
	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Nhập số trang bạn muốn chuyển đến:';
	var on_page = '1';
	var per_page = '10';
	var base_url = './tutorialtao-category-menu-da-cap-voi-cau-truc-cay-t2706';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/; domain=www.zend.vn';
	var onload_functions = new Array();
	var onunload_functions = new Array();

	

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>

<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/styleswitcher.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/forum_fn.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery-1.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery_009.js"></script>

<!-- <script type="text/javascript" src="forum_files/yuiloader-dom-event.js"></script>
<script type="text/javascript" src="forum_files/connection-min.js"></script>
<script type="text/javascript" src="forum_files/vbulletin-core.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/combo?2.8.0r4/build/selector/selector-min.js&amp;2.8.0r4/build/event-delegate/event-delegate-min.js&amp;2.8.0r4/build/animation/animation-min.js"></script>
<script type="text/javascript" src="forum_files/vsqspoiler.js"></script>
<script type="text/javascript" src="forum_files/vbulletin-threadbit.js"></script>
<script type="text/javascript" src="forum_files/vbulletin_read_marke.js"></script> -->

<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery_006.js"></script>

<script type="text/javascript">
    $(function()
        {
            $('.subforumlist').removeClass('commalist');
            $('.subforumlist').addClass('column3');
            $('.forumdata').addClass('forumdata');
            $('.datacontainer').addClass('datacontainer');
            $('.subforums h4').css('display', 'none');
       });
</script>

<link href="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery-ui-1.css" rel="stylesheet" type="text/css" media="screen, projection">


<link href="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/print.css" rel="stylesheet" type="text/css" media="print" title="printonly">
<link href="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/style.css" rel="stylesheet" type="text/css" media="screen, projection">

<link href="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/normal.css" rel="stylesheet" type="text/css" title="A">
<link href="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/medium.css" rel="alternate stylesheet" type="text/css" title="A+">
<link href="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/large.css" rel="alternate stylesheet" type="text/css" title="A++">
<link href="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/chat.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery-1_002.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery_008.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery_cookie.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery_007.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery_010.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery_011.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery-ui-1.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery_005.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery_012.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery_004.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery_002.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery_003.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery_013.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery_014.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery_016.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/underscore-min.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery_017.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/m_004.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/m_008.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/m_005.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/m.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/m_003.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/m_007.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/m_006.js"></script>
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/m_002.js"></script>
<script type="text/javascript">
// <![CDATA[
jQuery(document).ready(function($){
	socialNetwork.init({
		allow_load: true,
		rtl: 'ltr' == 'rtl' ? true: false,
	    expanderTextMore: 'See More',
	    expanderTextLess: 'Close',
	    browserOutdatedTitle : 'Your browser is outdated',
	    browserOutdated : 'Some of the features will not work on your browser. We highly recommend you to update it.',
	    showBrowserOutdated: '0' == '1' ? true : false,
		user_id: 1,
		cookie : {
			name : 'phpbb3_ps6dq',
			path : '/',
			domain : 'www.zend.vn',
			secure : '0'=='1'
		},
		confirmBox: {
		    enable: '1' == '1' ? true : false,
		    resizable : '' == '1' ? true : false,
		    draggable : '0' == '1' ? true : false,
		    modal : '1' == '1' ? true : false,
		    width : '400',
		    button_confirm : 'Confirm',
		    button_cancel : 'Cancel',
		    button_close : 'Close',
		    postMinChar : 1
		},
		enableModules : {
			im : '' == '1',
			us : '' == '1',
			ntf : '' == '1',
			fms : '' == '1',
			ap : '1' == '1' && '' == 1,
			up : '' == '1'
		},
		comments : {
			watermark : 'Write a comment...',
			empty : 'You can not submit an empty comment',
			deleteTitle : 'Delete comment',
			deleteText : 'Are you sure you want to delete this comment?'
		},
		menuPosition:{
			my : "right top",
	        at : "left top"
	        }
	});

// ## ACTIVITY PAGE -=- START ##

// ## ACTIVITY PAGE -=- END ##

// ## INSTANT MESSENGER -=- START ##

// ## INSTANT MESSENGER -=- END ##

// ## NOTIFICATIONS -=- START ##

// ## NOTIFICATIONS -=- END ##

// ## FRIEND MANAGEMENT SYSTEM -=- START ##

// ## FRIEND MANAGEMENT SYSTEM -=- END ##

// ## USER STATUS -=- START ##

// ## USER STATUS -=- END ##

// ## PROFILE -=- START ##

// ## PROFILE -=- END ##

});
// ]]>
</script>

<!--[if IE]>
	<link rel="stylesheet" type="text/css" href="./styles/se_square_left/theme/ie-over.css" />
<![endif]-->

<script type="text/javascript">
	$(document).ready(function() { 
		$(".popupmenu").hover(function(){ 
			$(this).find('ul.popupbody').css({visibility: "visible",display: "none"}).show(400); 
		},function(){ 
			$(this).find('ul.popupbody').css({visibility: "hidden"}); 
		}); 
	});
</script>

<script language="javascript">
	$(document).ready(function(){
		(function($){
			//Căn giữa phần tử thuộc tính là absolute so với phần hiển thị của trình duyệt, chỉ dùng cho phần tử absolute đối với body
			$.fn.absoluteCenter = function(){
				this.each(function(){
					var top = -($(this).outerHeight() / 2)+'px';
					var left = -($(this).outerWidth() / 2)+'px';
					$(this).css({'position':'absolute', 'position':'fixed', 'margin-top':top, 'margin-left':left, 'top':'50%', 'left':'50%'});
					return this;
				});
			}
		})(jQuery);
		
		$('a#show-popup').click(function(){
			//Đặt biến cho các đối tượng để gọi dễ dàng
			var bg=$('div#popup-bg');
			var obj=$('div#popup-sitemap');
			var btnClose=obj.find('#popup-close');
			//Hiện các đối tượng
			bg.animate({opacity:0.2},0).fadeIn(1000).absoluteCenter(); //cho nền trong suốt
			obj.fadeIn(1000).draggable({cursor:'move',handle:'#popup-header'}).absoluteCenter(); //căn giữa popup và thêm draggable của jquery UI cho phần header của popup
			//Đóng popup khi nhấn nút
			btnClose.click(function(){
				bg.fadeOut(1000);
				obj.fadeOut(1000);
			});
			//Đóng popup khi nhấn background
			bg.click(function(){
				btnClose.click(); //Kế thừa nút đóng ở trên
			});
			//Đóng popup khi nhấn nút Esc trên bàn phím
			$(document).keydown(function(e){
				if(e.keyCode==27){
					btnClose.click(); //Kế thừa nút đóng ở trên
				}
			});
			return false;
		});
	});
</script>

<script src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/in.php" async="" type="text/javascript"></script></head>

<body id="phpbb" class="section-viewtopic ltr">

<div id="wrap-top">
	<div class="above_body">
		<div id="header" class="floatcontainer doc_header">
			<div class="header-top-banner">
				<img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/zendvn-bg-logo.png" class="dnt-change">
				<div class="header-logo">
					<a name="top" href="http://www.zend.vn/forum/?sid=4cc54eed1d94bcda1299a860f09c0627" class="logo-image dnt-change">
						<img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/zendvn-logo-left.png" alt="" title=""></a>
				</div>
				<div class="header-text">
					<a name="top" href="http://www.zend.vn/forum/?sid=4cc54eed1d94bcda1299a860f09c0627" class="logo-image dnt-change">
						<img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/zendvn-logo-right.png" alt="" title=""></a>
				</div>
				<div class="clear"></div>
			</div>
			
			<hr>
		</div>
		
		<div id="navbar-top" class="navbar-top">
			<ul id="navtabs-top" class="navtabs-top floatcontainer">
					<li><a class="navtab" href="http://www.zend.vn/public" target="_blank">Trang chủ</a></li>
					<li class="selected"><a class="navtab" href="http://www.zend.vn/forum/?sid=4cc54eed1d94bcda1299a860f09c0627">Diễn đàn</a>
						<ul class="floatcontainer">
							<li><a rel="help" href="http://www.zend.vn/forum/faq.php?sid=4cc54eed1d94bcda1299a860f09c0627">FAQ</a></li>
							<li><a href="http://www.zend.vn/forum/chat.php?sid=4cc54eed1d94bcda1299a860f09c0627">Chat Center</a></li>
							<li class="popupmenu" id="yui-gen0">
								<a href="javascript:void(0)" class="popupctrl" id="yui-gen2">Forum Actions</a>
								<ul class="popupbody" id="yui-gen1">
									
										<li><a href="http://www.zend.vn/forum/search.php?search_id=unanswered&amp;sid=4cc54eed1d94bcda1299a860f09c0627">Bài viết chưa được trả lời</a></li>
										
										<li><a href="http://www.zend.vn/forum/search.php?search_id=active_topics&amp;sid=4cc54eed1d94bcda1299a860f09c0627">Chủ đề sôi nổi</a></li>
									
								</ul>
							</li>
							<li class="popupmenu" id="yui-gen3">
								<a href="javascript:void(0)" class="popupctrl" accesskey="3" id="yui-gen5">Quick Links</a>
								<ul class="popupbody" id="yui-gen4">
									<li><a href="#" id="show-popup" rel="nofollow">Sitemap</a></li>
								</ul>
							</li>
						</ul>
					</li>	
					<li><a class="navtab" href="http://www.zend.vn/public/khoa-hoc-truc-tuyen" accesskey="2">Khóa học</a></li>
					<li><a class="navtab" href="http://www.zend.vn/public/thong-tin-tuyen-dung.html" target="_blank">Tuyển dụng</a></li>
					<li><a class="navtab" href="http://www.zend.vn/public/lap-trinh" target="_blank">Thủ thuật</a></li>
					<li><a class="navtab" href="http://www.zend.vn/forum/memberlist.php?sid=4cc54eed1d94bcda1299a860f09c0627" target="_self">Thành viên</a></li>
					
					<li><a class="navtab" href="http://www.zend.vn/forum/ucp.php?mode=register&amp;sid=4cc54eed1d94bcda1299a860f09c0627" target="_self">Đăng ký</a></li>
					
			</ul>
			
			<div id="globalsearch" class="globalsearch">
				<form action="./search.php?sid=4cc54eed1d94bcda1299a860f09c0627" method="post" id="navbar_search" class="navbar_search">
					<span class="textboxcontainer"><span><input name="keywords" id="keywords" maxlength="128" class="textbox" value="Nhập từ khóa…" onclick="if(this.value=='Nhập từ khóa…')this.value='';" onblur="if(this.value=='')this.value='Nhập từ khóa…';" type="text"></span></span> 
					<span class="buttoncontainer"><span><input class="searchbutton" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/zendvn_search.png" name="submit" onclick="document.getElementById('navbar_search').submit;" tabindex="100" type="image"></span></span>
				</form>
				<ul class="navbar_advanced_search">
					<li><a href="http://www.zend.vn/forum/search.php?sid=4cc54eed1d94bcda1299a860f09c0627">Tìm kiếm nâng cao</a>&nbsp;&nbsp;&nbsp;<a id="linksearchgoogle" href="http://www.zend.vn/forum/search.php?sid=4cc54eed1d94bcda1299a860f09c0627">Google Search</a></li>
				</ul>
			</div>
		
		</div> 
	</div>
</div>

<div id="popup-bg"></div>
<div id="popup-sitemap">
	<div id="popup-header">Sitemap<span id="popup-close" title="Close">x</span></div>
	<div id="popup-content">
	
		<form method="post" id="jumpbox" action="./viewforum.php?sid=4cc54eed1d94bcda1299a860f09c0627" onsubmit="if(document.jumpbox.f.value == -1){return false;}">
	
		
			<fieldset class="jumpbox" style="text-align: center">
		
				<label for="f" accesskey="j">Chuyển đến:</label>
				<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }" size="24">
				
					<option value="-1">Chọn một chuyên mục</option>
				<option value="-1">------------------</option>
					<option value="1">Thông Tin Chung</option>
				
					<option value="73">&nbsp; &nbsp;Thông báo</option>
				
					<option value="6">&nbsp; &nbsp;Góp ý, đề nghị</option>
				
					<option value="7">&nbsp; &nbsp;Cảnh cáo - Vi phạm</option>
				
					<option value="10">Hỗ trợ khóa học</option>
				
					<option value="11">&nbsp; &nbsp;Thông tin về các khóa học</option>
				
					<option value="101">&nbsp; &nbsp;Khóa học miễn phí</option>
				
					<option value="77">&nbsp; &nbsp;&nbsp; &nbsp;Tự học lập trình PHP qua video</option>
				
					<option value="85">&nbsp; &nbsp;&nbsp; &nbsp;Thiết kế web với Joomla!</option>
				
					<option value="123">&nbsp; &nbsp;&nbsp; &nbsp;Thiết kế web với Dreamweaver</option>
				
					<option value="141">&nbsp; &nbsp;&nbsp; &nbsp;Xây dựng website bán hàng với Joomla</option>
				
					<option value="92">&nbsp; &nbsp;Hỗ trợ khóa học online</option>
				
					<option value="70">&nbsp; &nbsp;&nbsp; &nbsp;Zend Framework</option>
				
					<option value="71">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;Hệ thống bài tập</option>
				
					<option value="72">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;Thảo luận về các bài tập</option>
				
					<option value="93">&nbsp; &nbsp;&nbsp; &nbsp;Joomla v2.5</option>
				
					<option value="94">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;Hệ thống bài tập</option>
				
					<option value="95">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;Thảo luận về các bài tập</option>
				
					<option value="138">&nbsp; &nbsp;&nbsp; &nbsp;jQuery Master</option>
				
					<option value="139">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;Hệ thống bài tập</option>
				
					<option value="140">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;Thảo luận về các bài tập</option>
				
					<option value="14">Zend Framework 1.x</option>
				
					<option value="9">&nbsp; &nbsp;Những thông tin mới về Zend Framework</option>
				
					<option value="5" selected="selected">&nbsp; &nbsp;Hỏi đáp chung về Zend Framework</option>
				
					<option value="8">&nbsp; &nbsp;&nbsp; &nbsp;Cài đặt &amp; Cấu hình ZF</option>
				
					<option value="84">&nbsp; &nbsp;&nbsp; &nbsp;Tổng hợp các bài viết hay về ZF</option>
				
					<option value="133">&nbsp; &nbsp;Các thành phần trong Zend Framework</option>
				
					<option value="16">&nbsp; &nbsp;&nbsp; &nbsp;Core Infrastructure</option>
				
					<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;Model-View-Controller (MVC)</option>
				
					<option value="17">&nbsp; &nbsp;&nbsp; &nbsp;Databases</option>
				
					<option value="15">&nbsp; &nbsp;&nbsp; &nbsp;Authentication &amp; Authorization</option>
				
					<option value="19">&nbsp; &nbsp;&nbsp; &nbsp;Mail, Formats &amp; Search</option>
				
					<option value="21">&nbsp; &nbsp;&nbsp; &nbsp;Web &amp; Web Services</option>
				
					<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;Internationalization (i18n) &amp; Localization (l10n)</option>
				
					<option value="22">&nbsp; &nbsp;Những thành phần mở rộng của Zend Framework</option>
				
					<option value="23">&nbsp; &nbsp;&nbsp; &nbsp;Những phần mở rộng (Extensions)</option>
				
					<option value="24">&nbsp; &nbsp;&nbsp; &nbsp;Các mã nguồn khác trong Zend Framework</option>
				
					<option value="25">&nbsp; &nbsp;&nbsp; &nbsp;Các dự án Zend Framework</option>
				
					<option value="78">Zend Framework 2.0</option>
				
					<option value="81">&nbsp; &nbsp;Tin tức mới về ZF2.0</option>
				
					<option value="79">&nbsp; &nbsp;Hỏi đáp chung về ZF2.0</option>
				
					<option value="80">&nbsp; &nbsp;Cài đặt &amp; Cấu hình ZF2.0</option>
				
					<option value="82">&nbsp; &nbsp;Giới thiệu Modules ZF2.0</option>
				
					<option value="110">Joomla!</option>
				
					<option value="121">&nbsp; &nbsp;Thông tin về Joomla</option>
				
					<option value="55">&nbsp; &nbsp;Sử dụng Joomla</option>
				
					<option value="57">&nbsp; &nbsp;Lập trình Joomla</option>
				
					<option value="56">&nbsp; &nbsp;Joomla Extentions</option>
				
					<option value="117">&nbsp; &nbsp;&nbsp; &nbsp;Module</option>
				
					<option value="58">&nbsp; &nbsp;&nbsp; &nbsp;Template</option>
				
					<option value="118">&nbsp; &nbsp;&nbsp; &nbsp;Component</option>
				
					<option value="119">&nbsp; &nbsp;&nbsp; &nbsp;Plugin</option>
				
					<option value="120">&nbsp; &nbsp;&nbsp; &nbsp;Tool</option>
				
					<option value="125">&nbsp; &nbsp;Website miễn phí</option>
				
					<option value="126">&nbsp; &nbsp;&nbsp; &nbsp;Du lịch</option>
				
					<option value="127">&nbsp; &nbsp;&nbsp; &nbsp;Khách sạn</option>
				
					<option value="128">&nbsp; &nbsp;&nbsp; &nbsp;Cà phê</option>
				
					<option value="129">&nbsp; &nbsp;&nbsp; &nbsp;Áo cưới</option>
				
					<option value="130">&nbsp; &nbsp;&nbsp; &nbsp;Thẩm mỹ</option>
				
					<option value="131">&nbsp; &nbsp;&nbsp; &nbsp;Trường học</option>
				
					<option value="132">&nbsp; &nbsp;&nbsp; &nbsp;Bán hàng</option>
				
					<option value="26">Kiến thức chung</option>
				
					<option value="124">&nbsp; &nbsp;Cùng nghiên cứu HTML, CSS, JS &amp; Jquery</option>
				
					<option value="27">&nbsp; &nbsp;PHP</option>
				
					<option value="41">&nbsp; &nbsp;&nbsp; &nbsp;PHP functions</option>
				
					<option value="42">&nbsp; &nbsp;&nbsp; &nbsp;PHP Classes</option>
				
					<option value="45">&nbsp; &nbsp;&nbsp; &nbsp;OOP</option>
				
					<option value="28">&nbsp; &nbsp;Cơ sở dữ liệu</option>
				
					<option value="74">&nbsp; &nbsp;&nbsp; &nbsp;Phân tích hệ thống thông tin</option>
				
					<option value="108">&nbsp; &nbsp;Web Design</option>
				
					<option value="29">&nbsp; &nbsp;&nbsp; &nbsp;HTML &amp; CSS</option>
				
					<option value="50">&nbsp; &nbsp;&nbsp; &nbsp;Javascript &amp; jQuery</option>
				
					<option value="134">&nbsp; &nbsp;&nbsp; &nbsp;HTML5 &amp; CSS3</option>
				
					<option value="86">&nbsp; &nbsp;Search Engine Optimization(SEO)</option>
				
					<option value="49">&nbsp; &nbsp;Cùng nghiên cứu &amp; Thảo luận</option>
				
					<option value="52">&nbsp; &nbsp;&nbsp; &nbsp;OpenID research room</option>
				
					<option value="68">&nbsp; &nbsp;&nbsp; &nbsp;Zend Framework room</option>
				
					<option value="44">&nbsp; &nbsp;Họ đã làm điều đó như thế nào?</option>
				
					<option value="116">&nbsp; &nbsp;Kiến thức khác</option>
				
					<option value="30">Tài nguyên chia sẻ</option>
				
					<option value="31">&nbsp; &nbsp;Phần mềm ứng dụng</option>
				
					<option value="32">&nbsp; &nbsp;Ebooks</option>
				
					<option value="33">&nbsp; &nbsp;Video training</option>
				
					<option value="48">&nbsp; &nbsp;Địa chỉ website</option>
				
					<option value="54">Các ứng dụng mã nguồn mở</option>
				
					<option value="59">&nbsp; &nbsp;Drupal cms</option>
				
					<option value="60">&nbsp; &nbsp;&nbsp; &nbsp;Drupal Extentions</option>
				
					<option value="61">&nbsp; &nbsp;&nbsp; &nbsp;Lập trình Drupal</option>
				
					<option value="62">&nbsp; &nbsp;&nbsp; &nbsp;Drupal Templates</option>
				
					<option value="97">&nbsp; &nbsp;Magento cms</option>
				
					<option value="98">&nbsp; &nbsp;&nbsp; &nbsp;Magento Extentions</option>
				
					<option value="99">&nbsp; &nbsp;&nbsp; &nbsp;Magento Templates</option>
				
					<option value="100">&nbsp; &nbsp;&nbsp; &nbsp;Lập trình Magento (Programming)</option>
				
					<option value="88">Server side - các công nghệ quản lý và quản trị hệ thống</option>
				
					<option value="91">&nbsp; &nbsp;Thảo luận chung về công nghệ quản trị</option>
				
					<option value="89">&nbsp; &nbsp;*NIX and Linux</option>
				
					<option value="90">&nbsp; &nbsp;WINDOWS SERVER 2000, 2003, 2008 and more</option>
				
					<option value="35">Giao lưu - Giải trí</option>
				
					<option value="36">&nbsp; &nbsp;Giao lưu</option>
				
					<option value="37">&nbsp; &nbsp;Tuyển dụng</option>
				
					<option value="38">&nbsp; &nbsp;Tìm việc</option>
				
				</select>
				<input value="Chuyển" class="button2" type="submit">
			</fieldset>
		</form>
	
	</div>
</div>

<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="navbar">
		
			<div class="inner"><span class="corners-top"><span></span></span>
			
			<div id="breadcrumb" class="breadcrumb">
				<ul class="floatcontainer">
					<li class="navbithome">
					<a href="http://www.zend.vn/forum/?sid=4cc54eed1d94bcda1299a860f09c0627" accesskey="1">
						<img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/navbit-home.png" alt="Home"></a>
					</li>
					<li class="navbit navbit-home"><a href="http://www.zend.vn/forum/?sid=4cc54eed1d94bcda1299a860f09c0627">Trang chủ</a></li>
					 <li class="navbit"><a href="http://www.zend.vn/forum/zend-framework-1x-f14.html-sid=4cc54eed1d94bcda1299a860f09c0627">Zend Framework 1.x</a></li> <li class="navbit"><a href="http://www.zend.vn/forum/hoi-dap-chung-ve-zend-framework-f5.html-sid=4cc54eed1d94bcda1299a860f09c0627">Hỏi đáp chung về Zend Framework</a></li>
					
					<li id="toplinks" class="rightside">
						
						<ul class="nouser">
							<li>
								<form id="navbar_loginform" action="./ucp.php?mode=login&amp;sid=4cc54eed1d94bcda1299a860f09c0627" method="post">
									<fieldset id="logindetails" class="logindetails">
										<div>
											<div class="form-input">
												<input name="username" class="textbox default-value" id="username-login" size="12" title="Tên thành viên" value="Tên thành viên" type="text">
												<input name="password" class="textbox" id="password-login" size="12" title="Mật khẩu" value="Mật khẩu" type="password">
												<div><input name="autologin" id="autologin" type="checkbox"><label for="autologin"> Ghi nhớ</label></div>
												<input name="login" value="Đăng nhập" class="loginbutton" type="submit">
											</div>
										</div>
									</fieldset>
								</form>
								<script type="text/javascript">
									$(function() {
										//username
									    var input = $('#username-login[type=text]');
									    input.focus(function() {
									         $(this).val('');
									    }).blur(function() {
									         var el = $(this);
									         if(el.val() == '')
									             el.val(el.attr('title'));
									    });
									  //pass
									    var input = $('#password-login[type=password]');
									    input.focus(function() {
									         $(this).val('');
									    }).blur(function() {
									         var el = $(this);
									         if(el.val() == '')
									             el.val(el.attr('title'));
									    });
									 });
								</script>
							</li>
						</ul>
						
						
					</li>
					
				</ul>
				<hr>
			</div>
			
			
			
			</div>
			
		</div>

	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
		 <script>
onload_functions.push('resizeimg();');
function resizeimg() {
	if (document.getElementsByTagName) {
		for (i = 0; i < document.getElementsByTagName('img').length; i++) {
			im = document.getElementsByTagName('img')[i];
			cls = im.className;
			if(cls != 'dnt-change'){
				if (im.width > 600) {
					im.style.width = '600px';
					eval("pop"
							+ String(i)
							+ " = new Function(\"pop = window.open('"
							+ im.src
							+ "','phpbbegypt','fullscale','width=400,height=400,scrollbars=1,resizable=1'); pop.focus();\")");
					eval("im.onclick = pop" + String(i) + ";");
					if (document.all)
						im.style.cursor = 'hand';
					if (!document.all)
						im.style.cursor = 'pointer';
					im.title = 'Click Here To See Image Full Size ';
				}
			}
		}
	}
}
</script>

<div class="share">
	<a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-t2706.html-&amp;sid=4cc54eed1d94bcda1299a860f09c0627&amp;view=print" accesskey="p" class="print">Xem bản in</a>
	<!-- <a href="http://www.facebook.com/share.php?u=http://www.zend.vn/forum/viewtopic.php?f=5%26t=2706"><img src="http://www.zend.vn/forum/images/share/facebook.gif" alt="" style="max-width: 18px; max-height: 18px;" /></a> -->
	
	<!-- <a href="http://twitter.com/home?status=[Tutorial]Tạo category, menu đa cấp với cấu trúc cây: http://www.zend.vn/forum/viewtopic.php?f=5%26t=2706"><img src="http://www.zend.vn/forum/images/share/twitter.gif" alt="" style="max-width: 18px; max-height: 18px;" /></a> -->
	
	<!-- <a href="http://www.myspace.com/Modules/PostTo/Pages/?u=http://www.zend.vn/forum/viewtopic.php?f=5%26t=2706&amp;t=[Tutorial]Tạo category, menu đa cấp với cấu trúc cây"><img src="http://www.zend.vn/forum/images/share/myspace.gif" alt="" style="max-width: 18px; max-height: 18px;" /></a> -->
	
	<!-- <a href="http://del.icio.us/post?url=http://www.zend.vn/forum/viewtopic.php?f=5%26t=2706&amp;title=[Tutorial]Tạo category, menu đa cấp với cấu trúc cây"><img src="http://www.zend.vn/forum/images/share/delicious.gif" alt="" style="max-width: 18px; max-height: 18px;" /></a> -->
	
</div>
<h1><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-t2706.html-&amp;sid=4cc54eed1d94bcda1299a860f09c0627">[Tutorial]Tạo category, menu đa cấp với cấu trúc cây</a></h1>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div class="clear"></div>
<div class="topic-actions">
	<div class="buttons">
	
		<a href="http://www.zend.vn/forum/posting.php?mode=reply&amp;f=5&amp;t=2706&amp;sid=4cc54eed1d94bcda1299a860f09c0627" rel="nofollow" class="newcontent_textcontrol" id="newreplylink_top">
				<span>+</span> Gửi bài trả lời
		</a>
	
	</div>

	
		<div class="search-box">
			<form method="post" id="topic-search" action="./search.php?sid=4cc54eed1d94bcda1299a860f09c0627">
			<fieldset>
				<input class="inputbox search tiny" name="keywords" id="search_keywords" size="20" value="Tìm kiếm trong chủ đề này…" onclick="if(this.value=='Tìm kiếm trong chủ đề này…')this.value='';" onblur="if(this.value=='')this.value='Tìm kiếm trong chủ đề này…';" type="text">
				<input class="button2" value="Tìm kiếm" type="submit">
				<input value="2706" name="t" type="hidden">
				<input value="msgonly" name="sf" type="hidden">
			</fieldset>
			</form>
		</div>
	
		<div class="pagination">
			45 bài viết
			 • <a class="pagi_pages" href="#" onclick="jumpto(); return false;">Trang <strong>1</strong> trên <strong>5</strong></a> • <span><strong>1</strong><span class="page-sep">, </span><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-t2706s10.html-sid=4cc54eed1d94bcda1299a860f09c0627">2</a><span class="page-sep">, </span><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-t2706s20.html-sid=4cc54eed1d94bcda1299a860f09c0627">3</a><span class="page-sep">, </span><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-t2706s30.html-sid=4cc54eed1d94bcda1299a860f09c0627">4</a><span class="page-sep">, </span><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-t2706s40.html-sid=4cc54eed1d94bcda1299a860f09c0627">5</a></span>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p14592" class="post bg2 online">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="#p14592">[Tutorial]Tạo category, menu đa cấp với cấu trúc cây</a></h3>
			<p class="author"><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-p14592.html-sid=4cc54eed1d94bcda1299a860f09c0627#p14592"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/icon_post_target.gif" alt="Gửi bài" height="9" width="11"></a>gửi bởi <strong><a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=1170&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #996633;" class="username-coloured">Mr.L</a></strong> » 26/02/2012  15:10 </p>

			

			<div class="content"><span style="font-weight: bold">Trong thực tế 
các lập trình viên thường phải sử dụng những kỹ thuật đệ qui mảng, 
database để xử lý category hay menu đa cấp, và các lập trình viên để 
biết được ưu điểm và nhược điểm của kỹ thuật này. Với kỹ thuật để qui để
 tạo category hay menu đa cấp thường rất dễ dàng xử lý bằng kỹ thuật 
nhưng nó bị hạn chế về tốc độ duyệt. Nếu dữ liệu của category hay menu 
trong database càng lớn thì tốc độ duyệt và hiển thị càng chậm. <br> </span><br>Để
 khắc phục điều này thì hiện nay người ta thường dùng mô hình cây  để 
lưu trữ category hay menu đa cấp vì khi duyệt, tìm kiếm và hiển thị 
category hay menu trên mô hình cây  rất nhanh và không phải sử dụng đến 
kỹ thuật đệ qui nên tốc độ của ứng dụng sẽ được cải thiện rõ rệt. Nhưng 
có một vài vấn đề phức tạp khi xây dựng cây làm các lập trình viên tốn 
rất nhiều thời gian để xử lý chính vì điều này nên hiện nay việc áp dụng
 cây là category đa cấp vẫn chưa được các lập trình viên sử dụng nhiều 
trong các ứng dụng thực tế.<br> <br>Trong quá trình làm việc chúng tôi 
đã xây dựng một lớp để đáp ứng nhu cầu công việc của chúng tôi. Nay 
chúng tôi xin hướng dẫn và chia sẽ lớp xử lý cây này đến cộng đồng lập 
tình hi vọng nó sẽ giúp ích cho các bạn trong quá trình làm việc.<br> <br>Các chức năng chính của lớp xử lý cây (Nested_Set class) bao gồm:<br><br><a href="http://www.zend.vn/source/nested.rar" class="postlink">Download mã nguồn của lớp Nested Set ở đây</a><br><br><a href="http://www.zend.vn/source/Zendvn.rar" class="postlink">Download mã nguồn giành cho Zend Famework</a><br><br><a href="http://www.zend.vn/source/nested.rar" class="postlink">Download mã nguồn trong video</a><br><br><br><span style="font-weight: bold">1.Thêm node mới:</span>
 Thêm node vào bên phải (insertRight) , thêm node vào bên trái 
(insertLeft), thêm node vào sau một node nào đó (insertAfter), thêm node
 vào trước một node nào đó (insertBefore) <br><span style="font-weight: bold">2.Di chuyển node:</span>
  Di chuyển node vào bên phải (moveRight) , di chuyển node vào bên trái 
(moveLeft), di chuyển node vào sau một node nào đó (moveAfter), di 
chuyển node vào trước một node nào đó (moveBefore)  <br><span style="font-weight: bold">3. Xóa node:</span> Xóa một nhánh của cây (removeBranch), xóa một node của cây (removeOne)  <br><span style="font-weight: bold">4. Cập nhật thông tin của node </span><br><span style="font-weight: bold">5. Sắp xếp lại thứ tự của các node </span> <br><span style="font-weight: bold">6. Hiển thị đường dẫn từ node con đến node cha (breadcrumbs)</span><br><span style="font-weight: bold">7. Liệt kê danh sách theo giá trị của node cha và level</span><br><span style="font-weight: bold">8. Tính tổng số node</span><br><span style="font-weight: bold">9. Lấy thông tin node hiện thời, node cha, node anh em…. </span> <br>Và còn nhiều phương thức khác nữa…<br><br>Nhấn vào hình để xem chi tiết video<br><br><span style="color: #FF0000">Phần 1: Thêm node mới vào cây </span><br><br><a href="http://video.zendvn.com/php/category-menu-da-cap-voi-cay-nhi-phan-nested-set-model-insert-node.html" class="postlink"><img title="Click Here To See Image Full Size " style="width: 600px; cursor: pointer;" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/Image201.png" alt="Hình ảnh"></a><br><br><span style="color: #FF0000">Phần 2: Di chuyển node trên cây</span><br><br><a href="http://video.zendvn.com/php/category-menu-da-cap-voi-cay-nhi-phan-nested-set-model-move-node.html" class="postlink"><img title="Click Here To See Image Full Size " style="width: 600px; cursor: pointer;" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/Image203.png" alt="Hình ảnh"></a><br><br><span style="color: #FF0000">Phần 3: Cập nhật - xóa - duyệt cây - sắp xếp ...</span><br><br><a href="http://video.zendvn.com/php/category-menu-da-cap-voi-cay-nhi-phan-nested-set-model-full-function.html" class="postlink"><img title="Click Here To See Image Full Size " style="width: 600px; cursor: pointer;" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/Image201_002.png" alt="Hình ảnh"></a><br><br><span style="font-weight: bold">Đây
 là một lớp được viết cho các lập trình viên PHP, trong thời gian sắp 
tới chúng tôi sẽ chuyển lớp này thành các lớp sử dụng trong lập trình 
Zend Framework và Joomla. Trong quá trình xây dựng lớp chắc sẽ có những 
thiếu sót, rất mong các bạn góp ý để chúng ta cùng hoàn thiện lớp xử lý 
cây này hơn nữa để có thể chia sẽ rộng rãi đến cộng đồng lập trình viên 
Việt Nam.</span></div>

			<div id="sig14592" class="signature"><a href="http://www.zend.vn/public/khoa-hoc-truc-tuyen" class="postlink"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/zend-famework-training.jpg" alt="Hình ảnh"></a><br><span style="font-size: 100%; line-height: 116%;"><span style="color: #40BF40">do<br>msgbox "Học là chiện lớn, chơi là chiện nhỏ, không làm được chiện nhỏ sao làm được chiện lớn";<br>loop</span></span></div>


		</div>

		
			<dl class="postprofile" id="profile14592">
			<dt>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=1170&amp;sid=4cc54eed1d94bcda1299a860f09c0627"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/file_003.jpeg" alt="Hình đại diện của thành viên" height="101" width="110"></a><br>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=1170&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #996633;" class="username-coloured">Mr.L</a>
			</dt>

			<dd>On Holiday<br><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/OnHoliday.png" alt="On Holiday"></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Bài viết:</strong> 1964</dd><dd><strong>Ngày tham gia:</strong> 03/08/2010  15:23</dd><dd><strong>Đến từ:</strong> Zendvn Group</dd>
			<dd><strong>Đã cảm ơn:</strong> <a href="http://www.zend.vn/forum/thankslist.php?mode=givens&amp;author_id=1170&amp;give=true&amp;sid=4cc54eed1d94bcda1299a860f09c0627">1</a> lần</dd>
			<dd><strong>Được cảm ơn:</strong> <a href="http://www.zend.vn/forum/thankslist.php?mode=givens&amp;author_id=1170&amp;give=false&amp;sid=4cc54eed1d94bcda1299a860f09c0627">21</a> lần</dd>
		
		
        <!-- <dd><strong>Đã cảm ơn:</strong> 1 lần</dd>
		<dd><strong>Được cảm ơn:</strong> 21 lần</dd> -->

		
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://mrllong.wordpress.com/"><span>Website</span></a></li><li class="yahoo-icon"><a href="http://edit.yahoo.com/config/send_webmesg?.target=phuocthinh_25&amp;.src=pg" onclick="popup(this.href, 780, 550); return false;"><span>Tài khoản Yahoo</span></a></li>
				</ul>
			</dd>
		

		</dl>
	
		
		<div class="back2top"><a href="#wrap" class="top">Đầu trang</a></div>

		<span class="corners-bottom"><span></span></span></div>
       
	</div>

	<hr class="divider">

	<div id="p14597" class="post bg1 offline">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3><a href="#p14597">Re: [Tutorial]Tạo category, menu đa cấp với cây nhị phân</a></h3>
			<p class="author"><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-p14597.html-sid=4cc54eed1d94bcda1299a860f09c0627#p14597"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/icon_post_target.gif" alt="Gửi bài" height="9" width="11"></a>gửi bởi <strong><a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=601&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #996633;" class="username-coloured">chungnn</a></strong> » 26/02/2012  16:05 </p>

			

			<div class="content">Alô, cây này có phải cây nhị phân đâu, mỗi node ở đây có thể có vô số node con mà, cây nhị phân thì chỉ có tối đa 2 con thôi :L</div>

			<div id="sig14597" class="signature">Thiện căn ở tại lòng ta<br>Chữ Tâm kia mới bằng ba chữ Tài<br><a href="http://devnotes.org/" class="postlink">http://devnotes.org/</a></div>


		</div>

		
			<dl class="postprofile" id="profile14597">
			<dt>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=601&amp;sid=4cc54eed1d94bcda1299a860f09c0627"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/file.jpeg" alt="Hình đại diện của thành viên" height="110" width="110"></a><br>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=601&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #996633;" class="username-coloured">chungnn</a>
			</dt>

			<dd>On Holiday<br><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/OnHoliday.png" alt="On Holiday"></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Bài viết:</strong> 777</dd><dd><strong>Ngày tham gia:</strong> 16/03/2010  12:00</dd>
			<dd><strong>Đã cảm ơn:</strong> 0 lần</dd>
			<dd><strong>Được cảm ơn:</strong> <a href="http://www.zend.vn/forum/thankslist.php?mode=givens&amp;author_id=601&amp;give=false&amp;sid=4cc54eed1d94bcda1299a860f09c0627">3</a> lần</dd>
		
		
        <!-- <dd><strong>Đã cảm ơn:</strong> 0 lần</dd>
		<dd><strong>Được cảm ơn:</strong> 3 lần</dd> -->

		

		</dl>
	
		
		<div class="back2top"><a href="#wrap" class="top">Đầu trang</a></div>

		<span class="corners-bottom"><span></span></span></div>
       
	</div>

	<hr class="divider">

	<div id="p14598" class="post bg2 offline">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3><a href="#p14598">Re: [Tutorial]Tạo category, menu đa cấp với cây nhị phân</a></h3>
			<p class="author"><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-p14598.html-sid=4cc54eed1d94bcda1299a860f09c0627#p14598"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/icon_post_target.gif" alt="Gửi bài" height="9" width="11"></a>gửi bởi <strong><a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=162&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #996633;" class="username-coloured">thuydx</a></strong> » 26/02/2012  19:29 </p>

			

			<div class="content">Đây là mô hình nested set data mà Chungnn đã giới thiệu.<br>Có cả code example với ZF1.x nữa <img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/icon_e_smile.gif" alt=":)"><br>Chỉ là sử dụng giải thuật tìm kiếm nhị phân chứ không phải cây nhị phân</div>

			<div id="sig14598" class="signature"><span style="color: #68b604"><span style="font-size: 200%; line-height: 116%;">Don't give up! You can do it! Just try your best!</span></span></div>


		</div>

		
			<dl class="postprofile" id="profile14598">
			<dt>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=162&amp;sid=4cc54eed1d94bcda1299a860f09c0627"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/file_003.jpeg" alt="Hình đại diện của thành viên" height="101" width="110"></a><br>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=162&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #996633;" class="username-coloured">thuydx</a>
			</dt>

			<dd>On Holiday<br><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/OnHoliday.png" alt="On Holiday"></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Bài viết:</strong> 992</dd><dd><strong>Ngày tham gia:</strong> 26/11/2009  17:10</dd><dd><strong>Đến từ:</strong> HCM</dd>
			<dd><strong>Đã cảm ơn:</strong> 0 lần</dd>
			<dd><strong>Được cảm ơn:</strong> <a href="http://www.zend.vn/forum/thankslist.php?mode=givens&amp;author_id=162&amp;give=false&amp;sid=4cc54eed1d94bcda1299a860f09c0627">2</a> lần</dd>
		
		
        <!-- <dd><strong>Đã cảm ơn:</strong> 0 lần</dd>
		<dd><strong>Được cảm ơn:</strong> 2 lần</dd> -->

		
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://wds.vn/"><span>Website</span></a></li><li class="yahoo-icon"><a href="http://edit.yahoo.com/config/send_webmesg?.target=thuy.asia&amp;.src=pg" onclick="popup(this.href, 780, 550); return false;"><span>Tài khoản Yahoo</span></a></li>
				</ul>
			</dd>
		

		</dl>
	
		
		<div class="back2top"><a href="#wrap" class="top">Đầu trang</a></div>

		<span class="corners-bottom"><span></span></span></div>
       
	</div>

	<hr class="divider">

	<div id="p14599" class="post bg1 offline">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3><a href="#p14599">Re: [Tutorial]Tạo category, menu đa cấp với cây nhị phân</a></h3>
			<p class="author"><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-p14599.html-sid=4cc54eed1d94bcda1299a860f09c0627#p14599"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/icon_post_target.gif" alt="Gửi bài" height="9" width="11"></a>gửi bởi <strong><a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=53&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #0033FF;" class="username-coloured">KhanhPham</a></strong> » 26/02/2012  19:53 </p>

			

			<div class="content">Cảm ơn <span style="font-weight: bold">chungnn &amp; thuyxdinh</span> đã góp ý. Đúng là đây không phải mô hình cây nhị phân mà là mô hình <span style="font-weight: bold">cây left-right</span>. Do nghỉ học lâu quá nên quên hết lý thuyết nên dùng từ không đúng.  <img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/blushing.gif" alt=":blushing:"> Thành thật xin lỗi mọi người <img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/blush.gif" alt=":blush:"></div>

			<div id="sig14599" class="signature"><span style="color: #FF0000"><span style="font-weight: bold">Ở đâu có ước mơ ở đó có con đường </span></span><br><span style="color: #008000"><br><span style="font-style: italic"><span style="font-weight: bold">Một người leo núi giỏi, không phải là người chinh phục được đỉnh núi <br>Mà là người có thể đưa nhưng người khác có cùng niềm đam mê và khát khao chinh phục đỉnh núi.</span></span></span></div>


		</div>

		
			<dl class="postprofile" id="profile14599">
			<dt>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=53&amp;sid=4cc54eed1d94bcda1299a860f09c0627"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/file_002.jpeg" alt="Hình đại diện của thành viên" height="105" width="110"></a><br>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=53&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #0033FF;" class="username-coloured">KhanhPham</a>
			</dt>

			<dd>Advisor Team<br><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/advisor.png" alt="Advisor Team"></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Bài viết:</strong> 79</dd><dd><strong>Ngày tham gia:</strong> 26/10/2009  17:22</dd><dd><strong>Đến từ:</strong> TP.HoChiMinh</dd>
			<dd><strong>Đã cảm ơn:</strong> 0 lần</dd>
			<dd><strong>Được cảm ơn:</strong> <a href="http://www.zend.vn/forum/thankslist.php?mode=givens&amp;author_id=53&amp;give=false&amp;sid=4cc54eed1d94bcda1299a860f09c0627">1</a> lần</dd>
		
		
        <!-- <dd><strong>Đã cảm ơn:</strong> 0 lần</dd>
		<dd><strong>Được cảm ơn:</strong> 1 lần</dd> -->

		
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://www.zend.vn/"><span>Website</span></a></li>
				</ul>
			</dd>
		

		</dl>
	
		
		<div class="back2top"><a href="#wrap" class="top">Đầu trang</a></div>

		<span class="corners-bottom"><span></span></span></div>
       
	</div>

	<hr class="divider">

	<div id="p14606" class="post bg2 offline">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3><a href="#p14606">Re: [Tutorial]Tạo category, menu đa cấp với cây nhị phân</a></h3>
			<p class="author"><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-p14606.html-sid=4cc54eed1d94bcda1299a860f09c0627#p14606"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/icon_post_target.gif" alt="Gửi bài" height="9" width="11"></a>gửi bởi <strong><a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=935&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #000000;" class="username-coloured">huuthanh3108</a></strong> » 27/02/2012  07:43 </p>

			

			<div class="content"><blockquote><div><cite>thuyxdinh đã viết:</cite>Đây là mô hình nested set data mà Chungnn đã giới thiệu.<br>Có cả code example với ZF1.x nữa <img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/icon_e_smile.gif" alt=":)"><br>Chỉ là sử dụng giải thuật tìm kiếm nhị phân chứ không phải cây nhị phân</div></blockquote><br>Đang chờ class for Zendframework thanks Zend.vn<br>mình góp ý thêm: thêm class xuất ra Xml (để làm site map,menu,....), hoặc xuất ra HTML (tag:&lt;ul&gt;&lt;li&gt;)</div>

			


		</div>

		
			<dl class="postprofile" id="profile14606">
			<dt>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=935&amp;sid=4cc54eed1d94bcda1299a860f09c0627"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/1j.gif" alt="Hình đại diện của thành viên" height="100" width="100"></a><br>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=935&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #000000;" class="username-coloured">huuthanh3108</a>
			</dt>

			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Bài viết:</strong> 45</dd><dd><strong>Ngày tham gia:</strong> 25/05/2010  15:29</dd>
			<dd><strong>Đã cảm ơn:</strong> 0 lần</dd>
			<dd><strong>Được cảm ơn:</strong> 0 lần</dd>
		
		
        <!-- <dd><strong>Đã cảm ơn:</strong> 0 lần</dd>
		<dd><strong>Được cảm ơn:</strong> 0 lần</dd> -->

		

		</dl>
	
		
		<div class="back2top"><a href="#wrap" class="top">Đầu trang</a></div>

		<span class="corners-bottom"><span></span></span></div>
       
	</div>

	<hr class="divider">

	<div id="p14637" class="post bg1 online">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3><a href="#p14637">Re: [Tutorial]Tạo category, menu đa cấp với cấu trúc cây</a></h3>
			<p class="author"><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-p14637.html-sid=4cc54eed1d94bcda1299a860f09c0627#p14637"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/icon_post_target.gif" alt="Gửi bài" height="9" width="11"></a>gửi bởi <strong><a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=1170&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #996633;" class="username-coloured">Mr.L</a></strong> » 27/02/2012  15:39 </p>

			

			<div class="content">Update source code+ video Cập nhật - xóa - duyệt cây - sắp xếp ... <img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/001_tt1.gif" alt=":tt1:"></div>

			<div id="sig14637" class="signature"><a href="http://www.zend.vn/public/khoa-hoc-truc-tuyen" class="postlink"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/zend-famework-training.jpg" alt="Hình ảnh"></a><br><span style="font-size: 100%; line-height: 116%;"><span style="color: #40BF40">do<br>msgbox "Học là chiện lớn, chơi là chiện nhỏ, không làm được chiện nhỏ sao làm được chiện lớn";<br>loop</span></span></div>


		</div>

		
			<dl class="postprofile" id="profile14637">
			<dt>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=1170&amp;sid=4cc54eed1d94bcda1299a860f09c0627"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/file_003.jpeg" alt="Hình đại diện của thành viên" height="101" width="110"></a><br>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=1170&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #996633;" class="username-coloured">Mr.L</a>
			</dt>

			<dd>On Holiday<br><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/OnHoliday.png" alt="On Holiday"></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Bài viết:</strong> 1964</dd><dd><strong>Ngày tham gia:</strong> 03/08/2010  15:23</dd><dd><strong>Đến từ:</strong> Zendvn Group</dd>
			<dd><strong>Đã cảm ơn:</strong> <a href="http://www.zend.vn/forum/thankslist.php?mode=givens&amp;author_id=1170&amp;give=true&amp;sid=4cc54eed1d94bcda1299a860f09c0627">1</a> lần</dd>
			<dd><strong>Được cảm ơn:</strong> <a href="http://www.zend.vn/forum/thankslist.php?mode=givens&amp;author_id=1170&amp;give=false&amp;sid=4cc54eed1d94bcda1299a860f09c0627">21</a> lần</dd>
		
		
        <!-- <dd><strong>Đã cảm ơn:</strong> 1 lần</dd>
		<dd><strong>Được cảm ơn:</strong> 21 lần</dd> -->

		
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://mrllong.wordpress.com/"><span>Website</span></a></li><li class="yahoo-icon"><a href="http://edit.yahoo.com/config/send_webmesg?.target=phuocthinh_25&amp;.src=pg" onclick="popup(this.href, 780, 550); return false;"><span>Tài khoản Yahoo</span></a></li>
				</ul>
			</dd>
		

		</dl>
	
		
		<div class="back2top"><a href="#wrap" class="top">Đầu trang</a></div>

		<span class="corners-bottom"><span></span></span></div>
       
	</div>

	<hr class="divider">

	<div id="p14653" class="post bg2 offline">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3><a href="#p14653">Re: [Tutorial]Tạo category, menu đa cấp với cấu trúc cây</a></h3>
			<p class="author"><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-p14653.html-sid=4cc54eed1d94bcda1299a860f09c0627#p14653"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/icon_post_target.gif" alt="Gửi bài" height="9" width="11"></a>gửi bởi <strong><a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=935&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #000000;" class="username-coloured">huuthanh3108</a></strong> » 27/02/2012  23:42 </p>

			

			<div class="content">Mình làm trên database postgres đến đoạn này thì bó tay<br><dl class="codebox"><dt>Mã: <a href="#" onclick="selectCode(this); return false;">Chọn tất cả</a></dt><dd><code>public function listItem($parents = 0,$items = 'all',$exclude_id = null,$level = 0){<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$sqlParents = 'SELECT @parentLeft := lft,@parentRight := rgt&nbsp; &nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;FROM ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;WHERE parents = ' . $parents . ';';<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$result = mysql_query($sqlParents,$this-&gt;_connect);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$sqlItems = 'SELECT node.*&nbsp; &nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; FROM ' . $this-&gt;_tableName . ' AS node ';<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if($items == 'all'){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$sqlItemsLR = ' WHERE node.lft &gt;= @parentLeft<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;AND node.rgt &lt;= @parentRight ';<br>&nbsp; &nbsp;&nbsp; &nbsp;}else{<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$sqlItemsLR = ' WHERE node.lft &gt; @parentLeft<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;AND node.rgt &lt; @parentRight ';<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if($exclude_id != null &amp;&amp; (int)$exclude_id &gt;0){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$sqlExclude = '&nbsp; &nbsp;SELECT lft, rgt&nbsp; &nbsp; &nbsp;<br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;FROM ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;WHERE id = ' . $exclude_id;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$resultExclude = mysql_query($sqlExclude,$this-&gt;_connect);<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$rowExclude = mysql_fetch_assoc($resultExclude); <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$lftExclude = $rowExclude['lft'];<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$rgtExclude = $rowExclude['rgt'];<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$sqlItems .= $sqlItemsLR;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if($level !=0 ){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$sqlItems .= ' AND node.level &lt;=&nbsp; ' . $level . ' '; <br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$sqlItems .= ' ORDER BY node.lft ';<br>&nbsp; &nbsp;&nbsp; &nbsp;//echo '&lt;br&gt;' . $sqlItems;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$result = mysql_query($sqlItems,$this-&gt;_connect);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if($result){<br>&nbsp; &nbsp;&nbsp; &nbsp;//&nbsp; &nbsp;echo '&lt;br&gt;' . $sqlParents;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;while ($row = mysql_fetch_assoc($result)){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if($row['lft'] &lt; $lftExclude || $row['lft'] &gt; $rgtExclude){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$dataArr[] = $row;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;return $dataArr;<br>&nbsp; &nbsp;}<br></code></dd></dl><br>POSTGRES nó không hiểu câu truy vấn này 		<br>$sqlParents = 'SELECT @parentLeft := lft,@parentRight := rgt     <br>					   FROM ' . $this-&gt;_tableName . '  <br>					   WHERE parents = ' . $parents . ';';<br>Khi mình test thì phát hiện ta tại hàm insertRight()<br><dl class="codebox"><dt>Mã: <a href="#" onclick="selectCode(this); return false;">Chọn tất cả</a></dt><dd><code>protected function insertRight(){&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$parentInfo =&nbsp; $this-&gt;getNodeInfo($this-&gt;_parent);<br>&nbsp; &nbsp;&nbsp; &nbsp;$parentRight = $parentInfo['rgt'];<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLeft = 'UPDATE ' . $this-&gt;_table . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET lft = lft + 2 <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE lft &gt; ' . $parentRight;<br>&nbsp; &nbsp;&nbsp; &nbsp;mysql_query($slqUpdateLeft,$this-&gt;_connect);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateRight = 'UPDATE ' . $this-&gt;_table . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET rgt = rgt + 2 <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE rgt &gt;= ' . $parentRight;<br>&nbsp; &nbsp;&nbsp; &nbsp;mysql_query($slqUpdateRight,$this-&gt;_connect);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data = $this-&gt;_data;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['parents']&nbsp; &nbsp;= $this-&gt;_parent;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['lft'] &nbsp; &nbsp;&nbsp; &nbsp;= $parentRight;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['rgt'] &nbsp; &nbsp;&nbsp; &nbsp;= $parentRight + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['level'] &nbsp; &nbsp;&nbsp; &nbsp;= $parentInfo['level'] + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$newData = $this-&gt;createInsertQuery($data);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqInsert = 'INSERT INTO ' . $this-&gt;_table . <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; '(' . 
$newData['cols'] . ') ' . 'VALUES(' . $newData['values'] . ')';<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;mysql_query($slqInsert,$this-&gt;_connect);<br>&nbsp; &nbsp;}<br></code></dd></dl><br>Khi insert lầm đầu tiên thì $parentInfo trả về NULL nên máy câu UPDATE ở dưới sinh ra lỗi.</div>

			


		</div>

		
			<dl class="postprofile" id="profile14653">
			<dt>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=935&amp;sid=4cc54eed1d94bcda1299a860f09c0627"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/1j.gif" alt="Hình đại diện của thành viên" height="100" width="100"></a><br>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=935&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #000000;" class="username-coloured">huuthanh3108</a>
			</dt>

			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Bài viết:</strong> 45</dd><dd><strong>Ngày tham gia:</strong> 25/05/2010  15:29</dd>
			<dd><strong>Đã cảm ơn:</strong> 0 lần</dd>
			<dd><strong>Được cảm ơn:</strong> 0 lần</dd>
		
		
        <!-- <dd><strong>Đã cảm ơn:</strong> 0 lần</dd>
		<dd><strong>Được cảm ơn:</strong> 0 lần</dd> -->

		

		</dl>
	
		
		<div class="back2top"><a href="#wrap" class="top">Đầu trang</a></div>

		<span class="corners-bottom"><span></span></span></div>
       
	</div>

	<hr class="divider">

	<div id="p14658" class="post bg1 online">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3><a href="#p14658">Re: [Tutorial]Tạo category, menu đa cấp với cấu trúc cây</a></h3>
			<p class="author"><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-p14658.html-sid=4cc54eed1d94bcda1299a860f09c0627#p14658"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/icon_post_target.gif" alt="Gửi bài" height="9" width="11"></a>gửi bởi <strong><a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=1170&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #996633;" class="username-coloured">Mr.L</a></strong> » 28/02/2012  08:25 </p>

			

			<div class="content">Ở hàm insertRight bạn có thể để giá trị mặc định là 0 khi không có giá trị<br><dl class="codebox"><dt>Mã: <a href="#" onclick="selectCode(this); return false;">Chọn tất cả</a></dt><dd><code>$parentRight = ($parentInfo['rgt'])?$parentInfo['rgt']:0;<br></code></dd></dl><br><br>còn ở đoạn code này<br><dl class="codebox"><dt>Mã: <a href="#" onclick="selectCode(this); return false;">Chọn tất cả</a></dt><dd><code>$sqlParents = 'SELECT @parentLeft := lft,@parentRight := rgt<br>FROM ' . $this-&gt;_tableName . '<br>WHERE parents = ' . $parents . ';';<br></code></dd></dl><br>bạn
 không cần gán biến trong mysql là @parengLeft và @parentRight,bạn có 
thể lấy ra được giá trị lft và rgt của node parent từ câu truy vấn sql 
và gán giá trị lft,rgt vào biến php.<br>sau đó ở các câu lệnh sau bạn truyền biến php đó vào.</div>

			<div id="sig14658" class="signature"><a href="http://www.zend.vn/public/khoa-hoc-truc-tuyen" class="postlink"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/zend-famework-training.jpg" alt="Hình ảnh"></a><br><span style="font-size: 100%; line-height: 116%;"><span style="color: #40BF40">do<br>msgbox "Học là chiện lớn, chơi là chiện nhỏ, không làm được chiện nhỏ sao làm được chiện lớn";<br>loop</span></span></div>


		</div>

		
			<dl class="postprofile" id="profile14658">
			<dt>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=1170&amp;sid=4cc54eed1d94bcda1299a860f09c0627"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/file_003.jpeg" alt="Hình đại diện của thành viên" height="101" width="110"></a><br>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=1170&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #996633;" class="username-coloured">Mr.L</a>
			</dt>

			<dd>On Holiday<br><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/OnHoliday.png" alt="On Holiday"></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Bài viết:</strong> 1964</dd><dd><strong>Ngày tham gia:</strong> 03/08/2010  15:23</dd><dd><strong>Đến từ:</strong> Zendvn Group</dd>
			<dd><strong>Đã cảm ơn:</strong> <a href="http://www.zend.vn/forum/thankslist.php?mode=givens&amp;author_id=1170&amp;give=true&amp;sid=4cc54eed1d94bcda1299a860f09c0627">1</a> lần</dd>
			<dd><strong>Được cảm ơn:</strong> <a href="http://www.zend.vn/forum/thankslist.php?mode=givens&amp;author_id=1170&amp;give=false&amp;sid=4cc54eed1d94bcda1299a860f09c0627">21</a> lần</dd>
		
		
        <!-- <dd><strong>Đã cảm ơn:</strong> 1 lần</dd>
		<dd><strong>Được cảm ơn:</strong> 21 lần</dd> -->

		
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://mrllong.wordpress.com/"><span>Website</span></a></li><li class="yahoo-icon"><a href="http://edit.yahoo.com/config/send_webmesg?.target=phuocthinh_25&amp;.src=pg" onclick="popup(this.href, 780, 550); return false;"><span>Tài khoản Yahoo</span></a></li>
				</ul>
			</dd>
		

		</dl>
	
		
		<div class="back2top"><a href="#wrap" class="top">Đầu trang</a></div>

		<span class="corners-bottom"><span></span></span></div>
       
	</div>

	<hr class="divider">

	<div id="p14662" class="post bg2 offline">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3><a href="#p14662">Re: [Tutorial]Tạo category, menu đa cấp với cấu trúc cây</a></h3>
			<p class="author"><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-p14662.html-sid=4cc54eed1d94bcda1299a860f09c0627#p14662"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/icon_post_target.gif" alt="Gửi bài" height="9" width="11"></a>gửi bởi <strong><a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=935&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #000000;" class="username-coloured">huuthanh3108</a></strong> » 28/02/2012  09:04 </p>

			

			<div class="content"><dl class="codebox"><dt>Mã: <a href="#" onclick="selectCode(this); return false;">Chọn tất cả</a></dt><dd><code>$sqlParents = 'SELECT @parentLeft := lft,@parentRight := rgt<br>FROM ' . $this-&gt;_tableName . '<br>WHERE parents = ' . $parents . ';';<br></code></dd></dl><br>Cái này ra 1 nhiều record mà Bác chứ phải 1 đâu, phải chăng là lấy Max(lft) và Max(rgt) ??<br>class cho Zend đây<br><dl class="codebox"><dt>Mã: <a href="#" onclick="selectCode(this); return false;">Chọn tất cả</a></dt><dd><code>&lt;?php<br>/**<br>&nbsp;* PHP Class<br>&nbsp;*<br>&nbsp;* LICENSE<br>&nbsp;*<br>&nbsp;* Processing Nested Set Model<br>&nbsp;*<br>&nbsp;* @category&nbsp; &nbsp;&nbsp; &nbsp;PHP classes<br>&nbsp;* @package&nbsp; &nbsp; &nbsp; &nbsp;Database<br>&nbsp;* @copyright&nbsp; &nbsp; &nbsp;Copyright (c) 2007-2012 Professional World company(http://www.worldprovn.com/)&nbsp; <br>&nbsp;*&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&amp; Vietnam 
Zend Framework community (http://www.zend.vn/)<br>&nbsp;* @author&nbsp; &nbsp;&nbsp; &nbsp;KhanhPham (khanhpham@worldprovn.com)<br>&nbsp;* @license&nbsp; &nbsp; &nbsp; &nbsp;GNU General Public License Version 2 or later (the "GPL")<br>&nbsp;* @version&nbsp; &nbsp; &nbsp;v1.0 5:46:57 PM Feb 20, 2012<br>&nbsp;*/<br><br>class Core_Model_NestedSet {<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp; * Name of table in database<br>&nbsp; &nbsp; * <br>&nbsp; &nbsp; * @var string<br>&nbsp; &nbsp; * <br>&nbsp; &nbsp; */<br>&nbsp; &nbsp;private $_tableName;<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Name of database<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @var Zend_Db_Adapter_Abstract<br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;private $_db;<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;public&nbsp; $_parent = 0; <br>&nbsp; &nbsp;<br>&nbsp; &nbsp;public &nbsp; &nbsp;$_data; <br>&nbsp; &nbsp;<br>&nbsp; &nbsp;public &nbsp; &nbsp;$_id; <br>&nbsp; &nbsp;<br>&nbsp; &nbsp;public &nbsp; &nbsp;$_orderArr; <br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Construct<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @param&nbsp; array Create connection to database.<br>&nbsp; &nbsp;* @param&nbsp; string Database adapter<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @return MySQL connection.<br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;public function __construct() {<br>&nbsp; &nbsp; &nbsp; &nbsp;/*<br>&nbsp; &nbsp; &nbsp; &nbsp; try {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $db = $this-&gt;getDbTable()-&gt;getAdapter();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;setDb($db);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; catch (Exception $e) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new Exception('Cannot set DB adapter: ' . $e-&gt;getMessage());<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; try {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $table = $this-&gt;getDbTable()-&gt;info();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;setTableName($table['name']);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; catch (Exception $e) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new Exception('Cannot set table name: ' . $e-&gt;getMessage());<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp;*/<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Update info of node<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @param&nbsp; array Data array store node info.<br>&nbsp; &nbsp;* @param&nbsp; int ID of node which you modify.<br>&nbsp; &nbsp;* @param&nbsp; int ID of parent node if you change parent node when you update current node<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @return A node modified and node info save to database.<br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;public function updateNode($data,$id = null,$newParentId = 0){<br>&nbsp; &nbsp;&nbsp; &nbsp;if($id != null &amp;&amp; $id != 0){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$nodeInfo = $this-&gt;getNodeInfo($id);<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_db-&gt;update($this-&gt;_tableName, $data,'id = '. $id);<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if($newParentId != null &amp;&amp; $newParentId &gt; 0){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if($nodeInfo['parents'] != $newParentId){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;moveNode($id,$newParentId);<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Move node to new parent (move: left - right - before - after)<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @param&nbsp; int ID of node which you want move to new parent.<br>&nbsp; &nbsp;* @param&nbsp; int ID of parent node which you want apply new node<br>&nbsp;
 &nbsp;* @param&nbsp; array Case when you apply new node (apply: left 
position - right position - before position - after position)<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @return Change tree structure.<br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;public function moveNode($id, $parent = 0, $options = null){<br>&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_id &nbsp; &nbsp;= $id;<br>&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_parent &nbsp; &nbsp;= $parent;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if($options['position'] == 'right' || $options == null)&nbsp; &nbsp;$this-&gt;moveRight();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if($options['position'] == 'left')&nbsp; &nbsp;$this-&gt;moveLeft();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if($options['position'] == 'after')&nbsp; &nbsp;$this-&gt;movetAfter($options['brother_id']);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if($options['position'] == 'before') $this-&gt;moveBefore($options['brother_id']);<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Move node to left postion a unit on a level<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @param&nbsp; int ID of node which you want move to new position.<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @return Change tree structure.<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;public function moveUp($id){<br>&nbsp; &nbsp;&nbsp; &nbsp;$nodeInfo = $this-&gt;getNodeInfo($id);&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$parentInfo = $this-&gt;getNodeInfo($nodeInfo['parents']);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$sql &nbsp; &nbsp;= 'SELECT * <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;FROM ' . $this-&gt;_tableName . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;WHERE lft &lt; ' . $nodeInfo['lft'] . '<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;AND parents = ' . $nodeInfo['parents'] . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;ORDER BY lft DESC <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;LIMIT 1<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;';<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($sql);<br>&nbsp; &nbsp;&nbsp; &nbsp;$nodeBrother = $stmt-&gt;fetch(Zend_Db::FETCH_ASSOC);<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if(!empty($nodeBrother)){&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$options = array('position'=&gt;'before','brother_id'=&gt;$nodeBrother['id']);<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;moveNode($id,$parentInfo['id'],$options);<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Move node to right postion a unit on a level<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @param&nbsp; int ID of node which you want move to new position.<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @return Change tree structure.<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;public function moveDown($id){<br>&nbsp; &nbsp;&nbsp; &nbsp;$nodeInfo = $this-&gt;getNodeInfo($id);&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$parentInfo = $this-&gt;getNodeInfo($nodeInfo['parents']);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$sql &nbsp; &nbsp;= 'SELECT * <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;FROM ' . $this-&gt;_tableName . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;WHERE lft &gt; ' . $nodeInfo['lft'] . '<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;AND parents = ' . $nodeInfo['parents'] . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;ORDER BY lft ASC&nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;LIMIT 1<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;';<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($sql);<br>&nbsp; &nbsp;&nbsp; &nbsp;$nodeBrother = $stmt-&gt;fetch(Zend_Db::FETCH_ASSOC);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if(!empty($nodeBrother)){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$options = array('position'=&gt;'after','brother_id'=&gt;$nodeBrother['id']);<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;moveNode($id,$parentInfo['id'],$options);<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Get info of parent node<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @param&nbsp; int ID of node which you want get info<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @return Node info.<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;public function getParentNode($id){<br>&nbsp; &nbsp;&nbsp; &nbsp;$infoNode = $this-&gt;getNodeInfo($id);<br>&nbsp; &nbsp;&nbsp; &nbsp;$parentId = $infoNode['parents'];&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$infoParentNode = $this-&gt;getNodeInfo($parentId);<br>&nbsp; &nbsp;&nbsp; &nbsp;return $infoParentNode;<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Update ordering of all node in tree<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @param&nbsp; array An array store info tree<br>&nbsp; &nbsp;* @param&nbsp; array An array store info of ordering<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @return Change tree structure.<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;public function orderTree($data,$orderArr){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$orderGroup = $this-&gt;orderGroup($data);&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$newOrderGroup = array();<br>&nbsp; &nbsp;&nbsp; &nbsp;foreach ($orderGroup as $key =&gt; $val){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$tmpVal = array();<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;foreach ($val as $key2 =&gt; $val2){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$tmpVal[$key2] = $orderArr[$key2];<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;natsort($tmpVal);&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$orderGroup[$key] = $tmpVal;<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;foreach ($orderGroup as $key =&gt; $val){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$tmpVal = array();<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;foreach ($val as $key2 =&gt; $val2){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$info = $this-&gt;getNodeByLeft($key2);<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$tmpVal[$info['id']] = $val2;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$orderGroup[$key] = $tmpVal;<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;foreach ($orderGroup as $key =&gt; $val){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;foreach ($val as $key2 =&gt; $val2){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$nodeID = $key2;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$parent = $key;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;moveNode($nodeID, $parent);<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Get info of node<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @param&nbsp; int Left value of node<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @return array Node info.<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;protected function getNodeByLeft($left){<br>&nbsp; &nbsp;&nbsp; &nbsp;$sql = 'SELECT * FROM ' . $this-&gt;_tableName . ' WHERE lft = ' . $left;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($sql);<br>&nbsp; &nbsp;&nbsp; &nbsp;$row = $stmt-&gt;fetch(Zend_Db::FETCH_ASSOC);<br>&nbsp; &nbsp;&nbsp; &nbsp;return $row;<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Create node groups<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @param&nbsp; array An array store info tree<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @return array of node groups<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;public function orderGroup($data = null){<br>&nbsp; &nbsp;&nbsp; &nbsp;if($data != null){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$orderArr = array();<br>&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;if(count($data)&gt;0){<br>&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;foreach ($data as $key =&gt; $val){<br>&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$orderArr[$val['id']] = array();<br>&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if(isset($orderArr[$val['parents']])){<br>&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$orderArr[$val['parents']][] = $val['lft'];<br>&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;$orderArr2 = array();<br>&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;foreach ($orderArr as $key =&gt; $val){<br>&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$tmp = array();<br>&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$tmp = $orderArr[$key];<br>&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if(count($tmp)&gt;0){<br>&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$orderArr2[$key] = array_flip($val);<br>&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_orderArr = $orderArr2;<br>&nbsp; &nbsp;&nbsp; &nbsp;return $this-&gt;_orderArr;<br>&nbsp; &nbsp;}<br><br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Create ordering of node by left value<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @param int ID of parent of current node<br>&nbsp; &nbsp;* @param int Letf value of current node<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @return int An value of ordering <br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;public function getNodeOrdering($parent,$left){<br>&nbsp; &nbsp;&nbsp; &nbsp;$ordering = $this-&gt;_orderArr[$parent][$left] + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;return $ordering;<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Create breadcrumbs for nodes of tree <br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @param int ID of current node<br>&nbsp; &nbsp;* @param int level of parent where you want get info<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @return array An array store info of breadcrumbs<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;public function breadcrumbs($id, $level_stop = null){<br>&nbsp; &nbsp;&nbsp; &nbsp;$sql = 'SELECT parent.* <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;FROM ' . $this-&gt;_tableName . ' AS node,<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;' . $this-&gt;_tableName . ' AS parent<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;WHERE node.lft BETWEEN parent.lft AND parent.rgt<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; AND node.id = ' . $id;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if(isset($level_stop)){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$sql .= ' AND parent.level &gt; ' . $level_stop;<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$sql .= ' ORDER BY node.lft';<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;//echo '&lt;br&gt;' . $sql;<br>&nbsp; &nbsp;&nbsp; &nbsp;$result = $this-&gt;_db-&gt;fetchAll($sql);&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;return $result;<br>&nbsp; &nbsp;}<br><br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Processing move node to before position of other node<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @param int ID of node which you want move current node to before postion<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @return Change tree structure<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;protected function moveBefore($brother_id){<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$infoMoveNode = $this-&gt;getNodeInfo($this-&gt;_id);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$lftMoveNode = $infoMoveNode['lft'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$rgtMoveNode = $infoMoveNode['rgt'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$widthMoveNode = $this-&gt;widthNode($lftMoveNode, $rgtMoveNode);&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$sqlReset = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; SET rgt = (rgt -&nbsp; ' . $rgtMoveNode . '),&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; 
&nbsp; lft = (lft -&nbsp; ' . $lftMoveNode . ')&nbsp; &nbsp;<br>&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE 
lft BETWEEN ' . $lftMoveNode . ' AND ' . $rgtMoveNode;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($sqlReset);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateRight = 'UPDATE ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;SET rgt = (rgt -&nbsp; ' . $widthMoveNode . ')&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;WHERE rgt &gt; ' . $rgtMoveNode;&nbsp; &nbsp;&nbsp; 
&nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateRight);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLeft = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; SET lft = (lft -&nbsp; ' . $widthMoveNode . ') <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE lft &gt; ' . $rgtMoveNode;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateLeft);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$infoBrotherNode = $this-&gt;getNodeInfo($brother_id);<br>&nbsp; &nbsp;&nbsp; &nbsp;$lftBrotherNode = $infoBrotherNode['lft'];<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLeft = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; SET lft = (lft +&nbsp; ' . $widthMoveNode . ') <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE lft &gt;= ' . $lftBrotherNode . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; AND rgt&gt;0';<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateLeft);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateRight = 'UPDATE ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;SET rgt = (rgt +&nbsp; ' . $widthMoveNode . ')&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;WHERE rgt &gt;= ' . $lftBrotherNode;&nbsp; 
&nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateRight);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$infoParentNode &nbsp; &nbsp;= $this-&gt;getNodeInfo($this-&gt;_parent);<br>&nbsp; &nbsp;&nbsp; &nbsp;$levelMoveNode &nbsp; &nbsp;&nbsp; &nbsp;= $infoMoveNode['level'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$levelParentNode&nbsp; &nbsp;= $infoParentNode['level'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$newLevelMoveNode&nbsp; = $levelParentNode + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLevel = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; SET level = (level&nbsp; -&nbsp; ' . $levelMoveNode . ' + '
 . $newLevelMoveNode . ')<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE rgt &lt;= 0';<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateLevel);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$newParent &nbsp; &nbsp;= $infoParentNode['id'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$newLeft &nbsp; &nbsp;= $infoBrotherNode['lft'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$newRight &nbsp; &nbsp;= $infoBrotherNode['lft'] + $widthMoveNode - 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateParent = 'UPDATE ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET parents = ' . $newParent . ',&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp; &nbsp; lft = ' . $newLeft . ',&nbsp; <br>&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; rgt = ' . $newRight . '&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; WHERE id = ' . $this-&gt;_id;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateParent);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateNode = 'UPDATE ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET rgt = (rgt +&nbsp; ' . $newRight . '), <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; lft = (lft +&nbsp; ' . $newLeft .
 ') <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; WHERE rgt &lt;0';&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateNode);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Processing move node to after position of other node<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @param int ID of node which you want move current node to after postion<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @return Change tree structure<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;protected function movetAfter($brother_id){<br><br>&nbsp; &nbsp;&nbsp; &nbsp;$infoMoveNode = $this-&gt;getNodeInfo($this-&gt;_id);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$lftMoveNode = $infoMoveNode['lft'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$rgtMoveNode = $infoMoveNode['rgt'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$widthMoveNode = $this-&gt;widthNode($lftMoveNode, $rgtMoveNode);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$sqlReset = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; SET rgt = (rgt -&nbsp; ' . $rgtMoveNode . '),&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; 
&nbsp; lft = (lft -&nbsp; ' . $lftMoveNode . ')&nbsp; &nbsp;<br>&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE 
lft BETWEEN ' . $lftMoveNode . ' AND ' . $rgtMoveNode;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($sqlReset);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateRight = 'UPDATE ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;SET rgt = (rgt -&nbsp; ' . $widthMoveNode . ')&nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;WHERE rgt &gt; ' . $rgtMoveNode;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateRight);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLeft = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; SET lft = (lft -&nbsp; ' . $widthMoveNode . ') <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE lft &gt; ' . $rgtMoveNode;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateLeft);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$infoBrotherNode = $this-&gt;getNodeInfo($brother_id);<br>&nbsp; &nbsp;&nbsp; &nbsp;$rgtBrotherNode = $infoBrotherNode['rgt'];&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLeft = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; SET lft = (lft +&nbsp; ' . $widthMoveNode . ') <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE lft &gt; ' . $rgtBrotherNode . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; AND rgt&gt;0';&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateLeft);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateRight = 'UPDATE ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;SET rgt = (rgt +&nbsp; ' . $widthMoveNode . ')&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;WHERE rgt &gt; ' . $rgtBrotherNode;&nbsp; 
&nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateRight);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$infoParentNode = $this-&gt;getNodeInfo($this-&gt;_parent);<br>&nbsp; &nbsp;&nbsp; &nbsp;$levelMoveNode &nbsp; &nbsp;&nbsp; &nbsp;= $infoMoveNode['level'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$levelParentNode&nbsp; &nbsp;= $infoParentNode['level'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$newLevelMoveNode&nbsp; = $levelParentNode + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLevel = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; SET level = (level&nbsp; -&nbsp; ' . $levelMoveNode . ' + '
 . $newLevelMoveNode . ')<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE rgt &lt;= 0';<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateLevel);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$newParent &nbsp; &nbsp;= $infoParentNode['id'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$newLeft &nbsp; &nbsp;= $infoBrotherNode['rgt'] + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;$newRight &nbsp; &nbsp;= $infoBrotherNode['rgt'] + $widthMoveNode;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateParent = 'UPDATE ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET parents = ' . $newParent . ',&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp; &nbsp; lft = ' . $newLeft . ',&nbsp; <br>&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; rgt = ' . $newRight . '&nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE id = ' . $this-&gt;_id;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateParent);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateNode = 'UPDATE ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET rgt = (rgt +&nbsp; ' . $newRight . '), <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; lft = (lft +&nbsp; ' . $newLeft .
 ') <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE rgt &lt;0';&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateNode);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Processing move node to left position of other node<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @return Change tree structure<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;protected function moveLeft(){<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$infoMoveNode = $this-&gt;getNodeInfo($this-&gt;_id);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$lftMoveNode = $infoMoveNode['lft'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$rgtMoveNode = $infoMoveNode['rgt'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$widthMoveNode = $this-&gt;widthNode($lftMoveNode, $rgtMoveNode);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$sqlReset = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; SET rgt = (rgt -&nbsp; ' . $rgtMoveNode . '),&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; 
&nbsp; lft = (lft -&nbsp; ' . $lftMoveNode . ')&nbsp; &nbsp;<br>&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE 
lft BETWEEN ' . $lftMoveNode . ' AND ' . $rgtMoveNode;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($sqlReset);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateRight = 'UPDATE ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;SET rgt = (rgt -&nbsp; ' . $widthMoveNode . ')&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;WHERE rgt &gt; ' . $rgtMoveNode;&nbsp; &nbsp;&nbsp; 
&nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateRight);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLeft = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; SET lft = (lft -&nbsp; ' . $widthMoveNode . ') <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE lft &gt; ' . $rgtMoveNode;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateLeft);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$infoParentNode = $this-&gt;getNodeInfo($this-&gt;_parent);<br>&nbsp; &nbsp;&nbsp; &nbsp;$lftParentNode = $infoParentNode['lft'];<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLeft = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; SET lft = (lft +&nbsp; ' . $widthMoveNode . ') <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE lft &gt; ' . $lftParentNode . '<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; AND rgt &gt; 0 <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ';<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateLeft);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateRight = 'UPDATE ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;SET rgt = (rgt +&nbsp; ' . $widthMoveNode . ')&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;WHERE rgt &gt; ' . $lftParentNode;&nbsp; &nbsp;&nbsp;
 &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateRight);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$levelMoveNode &nbsp; &nbsp;&nbsp; &nbsp;= $infoMoveNode['level'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$levelParentNode&nbsp; &nbsp;= $infoParentNode['level'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$newLevelMoveNode&nbsp; = $levelParentNode + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLevel = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; SET level = (level&nbsp; -&nbsp; ' . $levelMoveNode . ' + '
 . $newLevelMoveNode . ')<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE rgt &lt;= 0';<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateLevel);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$newParent &nbsp; &nbsp;= $infoParentNode['id'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$newLeft &nbsp; &nbsp;= $infoParentNode['lft'] + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;$newRight &nbsp; &nbsp;= $infoParentNode['lft'] + $widthMoveNode;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateParent = 'UPDATE ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET parents = ' . $newParent . ',&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp; &nbsp; lft = ' . $newLeft . ',&nbsp; <br>&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; rgt = ' . $newRight . '&nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE id = ' . $this-&gt;_id;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateParent);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateNode = 'UPDATE ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET rgt = (rgt +&nbsp; ' . $newRight . '), <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; lft = (lft +&nbsp; ' . $newLeft .
 ') <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE rgt &lt;0';<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateNode);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Processing move node to right position of other node<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @return Change tree structure<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;protected function moveRight(){<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$infoMoveNode = $this-&gt;getNodeInfo($this-&gt;_id);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$lftMoveNode = $infoMoveNode['lft'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$rgtMoveNode = $infoMoveNode['rgt'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$widthMoveNode = $this-&gt;widthNode($lftMoveNode, $rgtMoveNode);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$sqlReset = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; SET rgt = (rgt -&nbsp; ' . $rgtMoveNode . '),&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; 
&nbsp; lft = (lft -&nbsp; ' . $lftMoveNode . ')&nbsp; &nbsp;<br>&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE 
lft BETWEEN ' . $lftMoveNode . ' AND ' . $rgtMoveNode;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($sqlReset);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateRight = 'UPDATE ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;SET rgt = (rgt -&nbsp; ' . $widthMoveNode . ')&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;WHERE rgt &gt; ' . $rgtMoveNode;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateRight);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLeft = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; SET lft = (lft -&nbsp; ' . $widthMoveNode . ') <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE lft &gt; ' . $rgtMoveNode;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateLeft);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$infoParentNode = $this-&gt;getNodeInfo($this-&gt;_parent);<br>&nbsp; &nbsp;&nbsp; &nbsp;$rgtParentNode = $infoParentNode['rgt'];<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLeft = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; SET lft = (lft +&nbsp; ' . $widthMoveNode . ') <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE lft &gt;= ' . $rgtParentNode . '<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; AND rgt &gt; 0 <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ';&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateLeft);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateRight = 'UPDATE ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;SET rgt = (rgt +&nbsp; ' . $widthMoveNode . ')&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;WHERE rgt &gt;= ' . $rgtParentNode;&nbsp; 
&nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;mysql_query($slqUpdateRight,$this-&gt;_connect);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$levelMoveNode &nbsp; &nbsp;&nbsp; &nbsp;= $infoMoveNode['level'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$levelParentNode&nbsp; &nbsp;= $infoParentNode['level'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$newLevelMoveNode&nbsp; = $levelParentNode + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLevel = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; SET level = (level&nbsp; -&nbsp; ' . $levelMoveNode . ' + '
 . $newLevelMoveNode . ')<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE rgt &lt;= 0';<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateLevel);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$newParent &nbsp; &nbsp;= $infoParentNode['id'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$newLeft &nbsp; &nbsp;= $infoParentNode['rgt'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$newRight &nbsp; &nbsp;= $infoParentNode['rgt'] + $widthMoveNode - 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateParent = 'UPDATE ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET parents = ' . $newParent . ',&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp; &nbsp; lft = ' . $newLeft . ',&nbsp; <br>&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; rgt = ' . $newRight . '&nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE id = ' . $this-&gt;_id;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateParent);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateNode = 'UPDATE ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET rgt = (rgt +&nbsp; ' . $newRight . '), <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; lft = (lft +&nbsp; ' . $newLeft .
 ') <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE rgt &lt;0';<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateNode);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Insert a new node to tree (move: left - right - before - after)<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @param&nbsp; array An array store info of new node<br>&nbsp; &nbsp;* @param&nbsp; int ID of parent node which you want insert new node<br>&nbsp;
 &nbsp;* @param&nbsp; array Case when you apply new node (apply: left 
position - right position - before position - after position)<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @return Change tree structure.<br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;public function insertNode($data, $parent = 0, $options = null) {<br>&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_data &nbsp; &nbsp;= $data;<br>&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_parent &nbsp; &nbsp;= $parent;<br><br>&nbsp; &nbsp;&nbsp; &nbsp;if($options['position'] == 'right' || $options == null)&nbsp; &nbsp;$this-&gt;insertRight();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if($options['position'] == 'left')&nbsp; &nbsp;$this-&gt;insertLeft();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if($options['position'] == 'after')&nbsp; &nbsp;$this-&gt;insertAfter($options['brother_id']);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if($options['position'] == 'before') $this-&gt;insertBefore($options['brother_id']);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Insert a new node to right position of other node<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @return Change tree structure<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;protected function insertRight(){&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$parentInfo =&nbsp; $this-&gt;getNodeInfo($this-&gt;_parent);<br>&nbsp; &nbsp;&nbsp; &nbsp;$parentRight = ($parentInfo['rgt'])?$parentInfo['rgt']:0;<br>&nbsp; &nbsp;&nbsp; &nbsp;$parentLevel = ($parentInfo['level'])?$parentInfo['level']:0;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLeft = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET lft = lft + 2 <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE lft &gt; ' . $parentRight;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateLeft);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateRight = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET rgt = rgt + 2 <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE rgt &gt;= ' . $parentRight;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateRight);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data = $this-&gt;_data;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['parents']&nbsp; &nbsp;= $this-&gt;_parent;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['lft'] &nbsp; &nbsp;&nbsp; &nbsp;= $parentRight;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['rgt'] &nbsp; &nbsp;&nbsp; &nbsp;= $parentRight + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['level'] &nbsp; &nbsp;&nbsp; &nbsp;= $parentLevel + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_db-&gt;insert($this-&gt;_tableName, $data);&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Insert a new node to left position of other node<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @return Change tree structure<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;protected function insertLeft(){&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$parentInfo =&nbsp; $this-&gt;getNodeInfo($this-&gt;_parent);<br>&nbsp; &nbsp;&nbsp; &nbsp;$parentLeft = ($parentInfo['lft'])?$parentInfo['lft']:0;<br>&nbsp; &nbsp;&nbsp; &nbsp;$parentLevel = ($parentInfo['level'])?$parentInfo['level']:0;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLeft = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET lft = lft + 2 <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE lft &gt; ' . $parentLeft;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateLeft);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateRight = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET rgt = rgt + 2 <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; WHERE rgt &gt; ' . ($parentLeft + 1);&nbsp; &nbsp;&nbsp; 
&nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateRight);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data = $this-&gt;_data;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['parents']&nbsp; &nbsp;= $this-&gt;_parent;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['lft'] &nbsp; &nbsp;&nbsp; &nbsp;= $parentLeft + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['rgt'] &nbsp; &nbsp;&nbsp; &nbsp;= $parentLeft + 2;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['level'] &nbsp; &nbsp;&nbsp; &nbsp;= $parentLevel + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_db-&gt;insert($this-&gt;_tableName, $data);<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Insert a new node to after position of other node<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @param int ID of node which you want insert new node to after postion<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @return Change tree structure<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;protected function insertAfter($brother_id){<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$parentInfo =&nbsp; $this-&gt;getNodeInfo($this-&gt;_parent);&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$parentLevel = ($parentInfo['level'])?$parentInfo['level']:0;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$brotherInfo =&nbsp; $this-&gt;getNodeInfo($brother_id);<br>&nbsp; &nbsp;&nbsp; &nbsp;$brotherRight = ($brotherInfo['lft'])?$brotherInfo['rgt']:0;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLeft = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET lft = lft + 2 <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE lft &gt; ' . $brotherRight;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateLeft);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateRight = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET rgt = rgt + 2 <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE rgt &gt; ' . $brotherRight;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateRight);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;$data = $this-&gt;_data;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['parents']&nbsp; &nbsp;= $this-&gt;_parent;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['lft'] &nbsp; &nbsp;&nbsp; &nbsp;= $brotherRight + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['rgt'] &nbsp; &nbsp;&nbsp; &nbsp;= $brotherRight + 2;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['level'] &nbsp; &nbsp;&nbsp; &nbsp;= $parentLevel + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_db-&gt;insert($this-&gt;_tableName, $data);<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Insert a new node to before position of other node<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @param int ID of node which you want insert new node to before postion<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;* @return Change tree structure<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;protected function insertBefore($brother_id){<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$parentInfo =&nbsp; $this-&gt;getNodeInfo($this-&gt;_parent);<br>&nbsp; &nbsp;&nbsp; &nbsp;if (FALSE === $parentInfo) {&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$parentLevel = 0;<br>&nbsp; &nbsp;&nbsp; &nbsp;}else{&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$parentLevel = $parentInfo['level'];<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;$brotherInfo =&nbsp; $this-&gt;getNodeInfo($brother_id);&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if (FALSE === $brotherInfo) {&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$brotherLeft = 0;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;}else{<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$brotherLeft = $brotherInfo['lft'];&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLeft = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET lft = lft + 2 <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE lft &gt;= ' . $brotherLeft;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateLeft);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateRight = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; SET rgt = rgt + 2 <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE rgt &gt;= ' . ($brotherLeft + 1);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateRight);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data = $this-&gt;_data;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['parents']&nbsp; &nbsp;= $this-&gt;_parent;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['lft'] &nbsp; &nbsp;&nbsp; &nbsp;= $brotherLeft;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['rgt'] &nbsp; &nbsp;&nbsp; &nbsp;= $brotherLeft + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;$data['level'] &nbsp; &nbsp;&nbsp; &nbsp;= $parentLevel + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_db-&gt;insert($this-&gt;_tableName, $data);<br>&nbsp; &nbsp;}&nbsp; &nbsp;<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp; &nbsp;* @param $tableName|string<br>&nbsp; &nbsp; &nbsp;*<br>&nbsp; &nbsp; &nbsp;* @return $this<br>&nbsp; &nbsp; &nbsp;*/<br>&nbsp; &nbsp; public function setTableName($tableName)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!is_null($tableName)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_tableName = (string) $tableName;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return $this;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; /**<br>&nbsp; &nbsp; &nbsp;* @param $db|Zend_Db_Adapter<br>&nbsp; &nbsp; &nbsp;*<br>&nbsp; &nbsp; &nbsp;* @return $this<br>&nbsp; &nbsp; &nbsp;*/<br>&nbsp; &nbsp; public function setDb($db)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_db = $db;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return $this;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Calculate total nodes<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @param int ID of parent node<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @return int Total nodes<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;public function totalNode($parents = 0){<br>&nbsp; &nbsp;&nbsp; &nbsp;$sql = 'SELECT lft,rgt FROM ' . $this-&gt;_tableName . ' WHERE parents = ' . $parents;<br>&nbsp; &nbsp;&nbsp; &nbsp;$result = mysql_query($sql,$this-&gt;_connect);<br>&nbsp; &nbsp;&nbsp; &nbsp;$lft = mysql_result($result, 0,'lft');<br>&nbsp; &nbsp;&nbsp; &nbsp;$rgt = mysql_result($result, 0,'rgt');<br>&nbsp; &nbsp;&nbsp; &nbsp;$total = ($rgt - $lft + 1)/2;<br>&nbsp; &nbsp;&nbsp; &nbsp;return $total;<br>&nbsp; &nbsp;}<br><br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Width of a branch of tree<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @param int Left value of node<br>&nbsp; &nbsp;* @param int Right value of node<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @return int width of node<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;public function widthNode($lft,$rgt){<br>&nbsp; &nbsp;&nbsp; &nbsp;$width = $rgt - $lft + 1;<br>&nbsp; &nbsp;&nbsp; &nbsp;return $width;<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Remove a node of tree<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @param int ID of node which you want remove<br>&nbsp; &nbsp;* @param string. If it is 'branch', delete a branch of tree<br>&nbsp;
 &nbsp;* &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; If it is 
'node', delete a node of tree and update all nodes of branch<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @return Change tree structure<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;*/<br><br>&nbsp; &nbsp;public function removeNode($id, $options = 'branch'){<br>&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_id = $id;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if($options == 'branch') $this-&gt;removeBranch();<br>&nbsp; &nbsp;&nbsp; &nbsp;if($options == 'node') $this-&gt;removeOne();<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Remove a branch of tree<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @return Change tree structure<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;protected&nbsp; function removeBranch(){<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$infoNodeRemove =&nbsp; $this-&gt;getNodeInfo($this-&gt;_id);<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$rgtNodeRemove &nbsp; &nbsp;&nbsp; &nbsp;= $infoNodeRemove['rgt'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$lftNodeRemove &nbsp; &nbsp;&nbsp; &nbsp;= $infoNodeRemove['lft'];<br>&nbsp; &nbsp;&nbsp; &nbsp;$widthNodeRemove &nbsp; &nbsp;= $this-&gt;widthNode($lftNodeRemove,$rgtNodeRemove);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqDelete = 'DELETE FROM ' . $this-&gt;_tableName . ' <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE 
lft BETWEEN ' . $lftNodeRemove . ' AND ' . $rgtNodeRemove;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqDelete);<br>&nbsp; &nbsp; &nbsp; &nbsp; $result = $stmt-&gt;rowCount();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateLeft = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; SET lft = (lft - ' . $widthNodeRemove . ')&nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE lft &gt; ' . $rgtNodeRemove;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateLeft);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$slqUpdateRight = 'UPDATE ' . $this-&gt;_tableName . ' <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; SET rgt = (rgt - ' . $widthNodeRemove . ')&nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; WHERE rgt &gt; ' . $rgtNodeRemove;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($slqUpdateRight);<br>&nbsp; &nbsp;&nbsp; &nbsp;$update = $stmt-&gt;fetch();<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Remove an one of tree<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @return Change tree structure<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;protected function removeOne(){<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$nodeInfo = $this-&gt;getNodeInfo($this-&gt;_id);<br>&nbsp; &nbsp;&nbsp; &nbsp;$sql = 'SELECT id <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;FROM ' . $this-&gt;_tableName . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;WHERE parents = ' . $nodeInfo['id'] . ' <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;ORDER BY lft ASC ';<br>&nbsp; &nbsp;&nbsp; &nbsp;$childIds = $this-&gt;_db-&gt;fetchCol($sql);<br>&nbsp; &nbsp;&nbsp; &nbsp;rsort($childIds);<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if(count($childIds)&gt;0){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;foreach ($childIds as $key =&gt; $val){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$id = $val;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$parent = $nodeInfo['parents'];<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$options = array('position'=&gt;'after','brother_id'=&gt;$nodeInfo['id']);<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;moveNode($id, $parent, $options);<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;removeNode($nodeInfo['id']);<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Get info node of tree<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @param int ID of node which you want get info<br>&nbsp; &nbsp;*&nbsp; <br>&nbsp; &nbsp;* @return Change tree structure<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;public function getNodeInfo($id){&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$select = $this-&gt;_db-&gt;select();<br>&nbsp; &nbsp;&nbsp; &nbsp;$select-&gt;from($this-&gt;_tableName,array('*'))-&gt;where('id = ?',$id);&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; $result&nbsp; = $this-&gt;_db-&gt;fetchRow($select);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; return $result;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;/**<br>&nbsp; &nbsp;* Get tree<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @author KhanhPham<br>&nbsp; &nbsp;* <br>&nbsp; &nbsp;* @param int ID of parent node<br>&nbsp; &nbsp;* @param string A case of get node list<br>&nbsp; &nbsp;* @param int ID of node which you don't want get info<br>&nbsp; &nbsp;* @param int level of tree<br>&nbsp; &nbsp;*&nbsp; <br>&nbsp; &nbsp;* @return array Node list<br>&nbsp; &nbsp;*<br>&nbsp; &nbsp;*/<br>&nbsp; &nbsp;public function listItem($parents = 0,$items = 'all',$exclude_id = null,$level = 0){<br>&nbsp; &nbsp;&nbsp; &nbsp;/*<br>&nbsp; &nbsp;&nbsp; &nbsp;$sqlParents = 'SELECT @parentLeft := lft,@parentRight := rgt&nbsp; &nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;FROM ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;WHERE parents = ' . $parents . ';';<br>&nbsp; &nbsp;&nbsp; &nbsp;echo $sqlParents;<br>&nbsp; &nbsp;&nbsp; &nbsp;$result = mysql_query($sqlParents,$this-&gt;_connect);<br>&nbsp; &nbsp;&nbsp; &nbsp;*/<br>&nbsp; &nbsp;&nbsp; &nbsp;$sqlItems = 'SELECT node.*&nbsp; &nbsp; <br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; FROM ' . $this-&gt;_tableName . ' AS node ';<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if($items == 'all'){<br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$sqlItemsLR = ' WHERE node.lft &gt;= 
(SELECT MAX(lft) FROM '.$this-&gt;_tableName.' WHERE parents = 
'.$parents.')<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;AND node.rgt &lt;= (SELECT
 MAX(rgt) FROM '.$this-&gt;_tableName.' WHERE parents = '.$parents.') ';<br>&nbsp; &nbsp;&nbsp; &nbsp;}else{<br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$sqlItemsLR = ' WHERE node.lft &gt; 
(SELECT MAX(lft) FROM '.$this-&gt;_tableName.' WHERE parents = 
'.$parents.')<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;AND node.rgt &lt; (SELECT 
MAX(rgt) FROM '.$this-&gt;_tableName.' WHERE parents = '.$parents.') ';<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if($exclude_id != null &amp;&amp; (int)$exclude_id &gt;0){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$sqlExclude = '&nbsp; &nbsp;SELECT lft, rgt&nbsp; &nbsp; &nbsp;<br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;FROM ' . $this-&gt;_tableName . '&nbsp; <br>&nbsp;
 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;WHERE id = ' . $exclude_id;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$stmt = $this-&gt;_db-&gt;query($sqlExclude);<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$rowExclude = $stmt-&gt;fetch();&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$lftExclude = ($rowExclude['lft'])?$rowExclude['lft']:0;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$rgtExclude = ($rowExclude['rgt'])?$rowExclude['rgt']:0;<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$sqlItems .= $sqlItemsLR;<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;if($level !=0 ){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$sqlItems .= ' AND node.level &lt;=&nbsp; ' . $level . ' '; <br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;$sqlItems .= ' ORDER BY node.lft ';<br>&nbsp; &nbsp;&nbsp; &nbsp;//echo '&lt;br&gt;' . $sqlItems;<br>&nbsp; &nbsp;&nbsp; &nbsp;//exit;<br>&nbsp; &nbsp;&nbsp; &nbsp;$result = $this-&gt;_db-&gt;fetchAll($sqlItems);<br>&nbsp; &nbsp;&nbsp; &nbsp;$dataArr = array();<br>&nbsp; &nbsp;&nbsp; &nbsp;if(count($result) &gt; 0 ){<br>&nbsp; &nbsp;&nbsp; &nbsp;//&nbsp; &nbsp;echo '&lt;br&gt;' . $sqlParents;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;foreach ($result as $row ) {&nbsp; &nbsp;&nbsp; &nbsp;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if($row['lft'] &lt; $lftExclude || $row['lft'] &gt; $rgtExclude){<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$dataArr[] = $row;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;}<br>&nbsp; &nbsp;&nbsp; &nbsp;return $dataArr;<br>&nbsp; &nbsp;}<br>}<br></code></dd></dl><br>Cách dùng <br><dl class="codebox"><dt>Mã: <a href="#" onclick="selectCode(this); return false;">Chọn tất cả</a></dt><dd><code>&nbsp;$model = new Core_Model_NestedSet();<br>&nbsp;$model-&gt;setDb(Zend_Db_Table::getDefaultAdapter());<br>&nbsp;$model-&gt;setTableName('nested_menu');<br>&nbsp;$data = $model-&gt;listItem(0,'all',0);<br>&nbsp;$orderArr = $model-&gt;orderGroup($data);<br>&nbsp;var_dump($model-&gt;breadcrumbs(4));<br></code></dd></dl></div>

			
				<div class="notice">Sửa lần cuối bởi <strong><a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=935&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #000000;" class="username-coloured">huuthanh3108</a></strong> vào ngày 28/02/2012  09:39 với 1 lần sửa.
					
				</div>
			


		</div>

		
			<dl class="postprofile" id="profile14662">
			<dt>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=935&amp;sid=4cc54eed1d94bcda1299a860f09c0627"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/1j.gif" alt="Hình đại diện của thành viên" height="100" width="100"></a><br>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=935&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #000000;" class="username-coloured">huuthanh3108</a>
			</dt>

			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Bài viết:</strong> 45</dd><dd><strong>Ngày tham gia:</strong> 25/05/2010  15:29</dd>
			<dd><strong>Đã cảm ơn:</strong> 0 lần</dd>
			<dd><strong>Được cảm ơn:</strong> 0 lần</dd>
		
		
        <!-- <dd><strong>Đã cảm ơn:</strong> 0 lần</dd>
		<dd><strong>Được cảm ơn:</strong> 0 lần</dd> -->

		

		</dl>
	
		
		<div class="back2top"><a href="#wrap" class="top">Đầu trang</a></div>

		<span class="corners-bottom"><span></span></span></div>
       
	</div>

	<hr class="divider">

	<div id="p14663" class="post bg1 online">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3><a href="#p14663">Re: [Tutorial]Tạo category, menu đa cấp với cấu trúc cây</a></h3>
			<p class="author"><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-p14663.html-sid=4cc54eed1d94bcda1299a860f09c0627#p14663"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/icon_post_target.gif" alt="Gửi bài" height="9" width="11"></a>gửi bởi <strong><a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=1170&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #996633;" class="username-coloured">Mr.L</a></strong> » 28/02/2012  09:35 </p>

			

			<div class="content">uhm, mình mới xem lại chổ này nên làm thế này, thay vì parent chúng ta sẽ là id<br><dl class="codebox"><dt>Mã: <a href="#" onclick="selectCode(this); return false;">Chọn tất cả</a></dt><dd><code>$sqlParents = 'SELECT @parentLeft := lft,@parentRight := rgt<br>FROM ' . $this-&gt;_tableName . '<br>WHERE parents = ' . $parents . ';';<br></code></dd></dl><br>sẻ là<br><dl class="codebox"><dt>Mã: <a href="#" onclick="selectCode(this); return false;">Chọn tất cả</a></dt><dd><code>SELECT `nested`.`lft`, `nested`.`rgt` FROM `nested` WHERE (id = parents)<br></code></dd></dl><br>và ở dưới<br><br><dl class="codebox"><dt>Mã: <a href="#" onclick="selectCode(this); return false;">Chọn tất cả</a></dt><dd><code>SELECT
 `node`.* FROM `nested` AS `node` WHERE (node.lft &gt;=parent['left]) 
AND (node.rgt &lt;=parent['right]) ORDER BY `node`.`lft` ASC<br></code></dd></dl><br>p/s: parent['left],parent['right'] là giá trị được lấy ở trên.</div>

			<div id="sig14663" class="signature"><a href="http://www.zend.vn/public/khoa-hoc-truc-tuyen" class="postlink"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/zend-famework-training.jpg" alt="Hình ảnh"></a><br><span style="font-size: 100%; line-height: 116%;"><span style="color: #40BF40">do<br>msgbox "Học là chiện lớn, chơi là chiện nhỏ, không làm được chiện nhỏ sao làm được chiện lớn";<br>loop</span></span></div>


		</div>

		
			<dl class="postprofile" id="profile14663">
			<dt>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=1170&amp;sid=4cc54eed1d94bcda1299a860f09c0627"><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/file_003.jpeg" alt="Hình đại diện của thành viên" height="101" width="110"></a><br>
				<a href="http://www.zend.vn/forum/memberlist.php?mode=viewprofile&amp;u=1170&amp;sid=4cc54eed1d94bcda1299a860f09c0627" style="color: #996633;" class="username-coloured">Mr.L</a>
			</dt>

			<dd>On Holiday<br><img src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/OnHoliday.png" alt="On Holiday"></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Bài viết:</strong> 1964</dd><dd><strong>Ngày tham gia:</strong> 03/08/2010  15:23</dd><dd><strong>Đến từ:</strong> Zendvn Group</dd>
			<dd><strong>Đã cảm ơn:</strong> <a href="http://www.zend.vn/forum/thankslist.php?mode=givens&amp;author_id=1170&amp;give=true&amp;sid=4cc54eed1d94bcda1299a860f09c0627">1</a> lần</dd>
			<dd><strong>Được cảm ơn:</strong> <a href="http://www.zend.vn/forum/thankslist.php?mode=givens&amp;author_id=1170&amp;give=false&amp;sid=4cc54eed1d94bcda1299a860f09c0627">21</a> lần</dd>
		
		
        <!-- <dd><strong>Đã cảm ơn:</strong> 1 lần</dd>
		<dd><strong>Được cảm ơn:</strong> 21 lần</dd> -->

		
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://mrllong.wordpress.com/"><span>Website</span></a></li><li class="yahoo-icon"><a href="http://edit.yahoo.com/config/send_webmesg?.target=phuocthinh_25&amp;.src=pg" onclick="popup(this.href, 780, 550); return false;"><span>Tài khoản Yahoo</span></a></li>
				</ul>
			</dd>
		

		</dl>
	
		
		<div class="back2top"><a href="#wrap" class="top">Đầu trang</a></div>

		<span class="corners-bottom"><span></span></span></div>
       
	</div>

	<hr class="divider">

	<form id="viewtopic" method="post" action="./tutorialtao-category-menu-da-cap-voi-cau-truc-cay-t2706.html-sid=4cc54eed1d94bcda1299a860f09c0627">

	<fieldset class="display-options" style="margin-top: 0; ">
		<a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-t2706s10.html-sid=4cc54eed1d94bcda1299a860f09c0627" class="right-box right">Trang kế tiếp</a>
		<label>Hiển thị bài viết cách đây: <select name="st" id="st"><option value="0" selected="selected">Tất cả bài viết</option><option value="1">1 ngày</option><option value="7">7 ngày</option><option value="14">2 tuần</option><option value="30">1 tháng</option><option value="90">3 tháng</option><option value="180">6 tháng</option><option value="365">1 năm</option></select></label>
		<label>Sắp xếp theo <select name="sk" id="sk"><option value="a">Người gửi</option><option value="t" selected="selected">Ngày gửi</option><option value="s">Tiêu đề</option></select></label> <label><select name="sd" id="sd"><option value="a" selected="selected">Tăng dần</option><option value="d">Giảm dần</option></select> <input name="sort" value="Chuyển" class="button2" type="submit"></label>
		
	</fieldset>

	</form>
	<hr>


<div class="topic-actions">
	<div class="buttons">
	
		<a href="http://www.zend.vn/forum/posting.php?mode=reply&amp;f=5&amp;t=2706&amp;sid=4cc54eed1d94bcda1299a860f09c0627" rel="nofollow" class="newcontent_textcontrol" id="newreplylink_top">
				<span>+</span> Gửi bài trả lời
		</a>
	
	</div>

	
		<div class="pagination">
			45 bài viết
			 • <a class="pagi_pages" href="#" onclick="jumpto(); return false;">Trang <strong>1</strong> trên <strong>5</strong></a> • <span><strong>1</strong><span class="page-sep">, </span><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-t2706s10.html-sid=4cc54eed1d94bcda1299a860f09c0627">2</a><span class="page-sep">, </span><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-t2706s20.html-sid=4cc54eed1d94bcda1299a860f09c0627">3</a><span class="page-sep">, </span><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-t2706s30.html-sid=4cc54eed1d94bcda1299a860f09c0627">4</a><span class="page-sep">, </span><a href="http://www.zend.vn/forum/tutorialtao-category-menu-da-cap-voi-cau-truc-cay-t2706s40.html-sid=4cc54eed1d94bcda1299a860f09c0627">5</a></span>
		</div>
	
</div>


	<p></p><p><a href="http://www.zend.vn/forum/hoi-dap-chung-ve-zend-framework-f5.html-sid=4cc54eed1d94bcda1299a860f09c0627" class="left-box left" accesskey="r">Quay về Hỏi đáp chung về Zend Framework</a></p>

	<form method="post" id="jumpbox" action="./viewforum.php?sid=4cc54eed1d94bcda1299a860f09c0627" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Chuyển đến:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Chọn một chuyên mục</option>
			<option value="-1">------------------</option>
				<option value="1">Thông Tin Chung</option>
			
				<option value="73">&nbsp; &nbsp;Thông báo</option>
			
				<option value="6">&nbsp; &nbsp;Góp ý, đề nghị</option>
			
				<option value="7">&nbsp; &nbsp;Cảnh cáo - Vi phạm</option>
			
				<option value="10">Hỗ trợ khóa học</option>
			
				<option value="11">&nbsp; &nbsp;Thông tin về các khóa học</option>
			
				<option value="101">&nbsp; &nbsp;Khóa học miễn phí</option>
			
				<option value="77">&nbsp; &nbsp;&nbsp; &nbsp;Tự học lập trình PHP qua video</option>
			
				<option value="85">&nbsp; &nbsp;&nbsp; &nbsp;Thiết kế web với Joomla!</option>
			
				<option value="123">&nbsp; &nbsp;&nbsp; &nbsp;Thiết kế web với Dreamweaver</option>
			
				<option value="141">&nbsp; &nbsp;&nbsp; &nbsp;Xây dựng website bán hàng với Joomla</option>
			
				<option value="92">&nbsp; &nbsp;Hỗ trợ khóa học online</option>
			
				<option value="70">&nbsp; &nbsp;&nbsp; &nbsp;Zend Framework</option>
			
				<option value="71">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;Hệ thống bài tập</option>
			
				<option value="72">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;Thảo luận về các bài tập</option>
			
				<option value="93">&nbsp; &nbsp;&nbsp; &nbsp;Joomla v2.5</option>
			
				<option value="94">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;Hệ thống bài tập</option>
			
				<option value="95">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;Thảo luận về các bài tập</option>
			
				<option value="138">&nbsp; &nbsp;&nbsp; &nbsp;jQuery Master</option>
			
				<option value="139">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;Hệ thống bài tập</option>
			
				<option value="140">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;Thảo luận về các bài tập</option>
			
				<option value="14">Zend Framework 1.x</option>
			
				<option value="9">&nbsp; &nbsp;Những thông tin mới về Zend Framework</option>
			
				<option value="5" selected="selected">&nbsp; &nbsp;Hỏi đáp chung về Zend Framework</option>
			
				<option value="8">&nbsp; &nbsp;&nbsp; &nbsp;Cài đặt &amp; Cấu hình ZF</option>
			
				<option value="84">&nbsp; &nbsp;&nbsp; &nbsp;Tổng hợp các bài viết hay về ZF</option>
			
				<option value="133">&nbsp; &nbsp;Các thành phần trong Zend Framework</option>
			
				<option value="16">&nbsp; &nbsp;&nbsp; &nbsp;Core Infrastructure</option>
			
				<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;Model-View-Controller (MVC)</option>
			
				<option value="17">&nbsp; &nbsp;&nbsp; &nbsp;Databases</option>
			
				<option value="15">&nbsp; &nbsp;&nbsp; &nbsp;Authentication &amp; Authorization</option>
			
				<option value="19">&nbsp; &nbsp;&nbsp; &nbsp;Mail, Formats &amp; Search</option>
			
				<option value="21">&nbsp; &nbsp;&nbsp; &nbsp;Web &amp; Web Services</option>
			
				<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;Internationalization (i18n) &amp; Localization (l10n)</option>
			
				<option value="22">&nbsp; &nbsp;Những thành phần mở rộng của Zend Framework</option>
			
				<option value="23">&nbsp; &nbsp;&nbsp; &nbsp;Những phần mở rộng (Extensions)</option>
			
				<option value="24">&nbsp; &nbsp;&nbsp; &nbsp;Các mã nguồn khác trong Zend Framework</option>
			
				<option value="25">&nbsp; &nbsp;&nbsp; &nbsp;Các dự án Zend Framework</option>
			
				<option value="78">Zend Framework 2.0</option>
			
				<option value="81">&nbsp; &nbsp;Tin tức mới về ZF2.0</option>
			
				<option value="79">&nbsp; &nbsp;Hỏi đáp chung về ZF2.0</option>
			
				<option value="80">&nbsp; &nbsp;Cài đặt &amp; Cấu hình ZF2.0</option>
			
				<option value="82">&nbsp; &nbsp;Giới thiệu Modules ZF2.0</option>
			
				<option value="110">Joomla!</option>
			
				<option value="121">&nbsp; &nbsp;Thông tin về Joomla</option>
			
				<option value="55">&nbsp; &nbsp;Sử dụng Joomla</option>
			
				<option value="57">&nbsp; &nbsp;Lập trình Joomla</option>
			
				<option value="56">&nbsp; &nbsp;Joomla Extentions</option>
			
				<option value="117">&nbsp; &nbsp;&nbsp; &nbsp;Module</option>
			
				<option value="58">&nbsp; &nbsp;&nbsp; &nbsp;Template</option>
			
				<option value="118">&nbsp; &nbsp;&nbsp; &nbsp;Component</option>
			
				<option value="119">&nbsp; &nbsp;&nbsp; &nbsp;Plugin</option>
			
				<option value="120">&nbsp; &nbsp;&nbsp; &nbsp;Tool</option>
			
				<option value="125">&nbsp; &nbsp;Website miễn phí</option>
			
				<option value="126">&nbsp; &nbsp;&nbsp; &nbsp;Du lịch</option>
			
				<option value="127">&nbsp; &nbsp;&nbsp; &nbsp;Khách sạn</option>
			
				<option value="128">&nbsp; &nbsp;&nbsp; &nbsp;Cà phê</option>
			
				<option value="129">&nbsp; &nbsp;&nbsp; &nbsp;Áo cưới</option>
			
				<option value="130">&nbsp; &nbsp;&nbsp; &nbsp;Thẩm mỹ</option>
			
				<option value="131">&nbsp; &nbsp;&nbsp; &nbsp;Trường học</option>
			
				<option value="132">&nbsp; &nbsp;&nbsp; &nbsp;Bán hàng</option>
			
				<option value="26">Kiến thức chung</option>
			
				<option value="124">&nbsp; &nbsp;Cùng nghiên cứu HTML, CSS, JS &amp; Jquery</option>
			
				<option value="27">&nbsp; &nbsp;PHP</option>
			
				<option value="41">&nbsp; &nbsp;&nbsp; &nbsp;PHP functions</option>
			
				<option value="42">&nbsp; &nbsp;&nbsp; &nbsp;PHP Classes</option>
			
				<option value="45">&nbsp; &nbsp;&nbsp; &nbsp;OOP</option>
			
				<option value="28">&nbsp; &nbsp;Cơ sở dữ liệu</option>
			
				<option value="74">&nbsp; &nbsp;&nbsp; &nbsp;Phân tích hệ thống thông tin</option>
			
				<option value="108">&nbsp; &nbsp;Web Design</option>
			
				<option value="29">&nbsp; &nbsp;&nbsp; &nbsp;HTML &amp; CSS</option>
			
				<option value="50">&nbsp; &nbsp;&nbsp; &nbsp;Javascript &amp; jQuery</option>
			
				<option value="134">&nbsp; &nbsp;&nbsp; &nbsp;HTML5 &amp; CSS3</option>
			
				<option value="86">&nbsp; &nbsp;Search Engine Optimization(SEO)</option>
			
				<option value="49">&nbsp; &nbsp;Cùng nghiên cứu &amp; Thảo luận</option>
			
				<option value="52">&nbsp; &nbsp;&nbsp; &nbsp;OpenID research room</option>
			
				<option value="68">&nbsp; &nbsp;&nbsp; &nbsp;Zend Framework room</option>
			
				<option value="44">&nbsp; &nbsp;Họ đã làm điều đó như thế nào?</option>
			
				<option value="116">&nbsp; &nbsp;Kiến thức khác</option>
			
				<option value="30">Tài nguyên chia sẻ</option>
			
				<option value="31">&nbsp; &nbsp;Phần mềm ứng dụng</option>
			
				<option value="32">&nbsp; &nbsp;Ebooks</option>
			
				<option value="33">&nbsp; &nbsp;Video training</option>
			
				<option value="48">&nbsp; &nbsp;Địa chỉ website</option>
			
				<option value="54">Các ứng dụng mã nguồn mở</option>
			
				<option value="59">&nbsp; &nbsp;Drupal cms</option>
			
				<option value="60">&nbsp; &nbsp;&nbsp; &nbsp;Drupal Extentions</option>
			
				<option value="61">&nbsp; &nbsp;&nbsp; &nbsp;Lập trình Drupal</option>
			
				<option value="62">&nbsp; &nbsp;&nbsp; &nbsp;Drupal Templates</option>
			
				<option value="97">&nbsp; &nbsp;Magento cms</option>
			
				<option value="98">&nbsp; &nbsp;&nbsp; &nbsp;Magento Extentions</option>
			
				<option value="99">&nbsp; &nbsp;&nbsp; &nbsp;Magento Templates</option>
			
				<option value="100">&nbsp; &nbsp;&nbsp; &nbsp;Lập trình Magento (Programming)</option>
			
				<option value="88">Server side - các công nghệ quản lý và quản trị hệ thống</option>
			
				<option value="91">&nbsp; &nbsp;Thảo luận chung về công nghệ quản trị</option>
			
				<option value="89">&nbsp; &nbsp;*NIX and Linux</option>
			
				<option value="90">&nbsp; &nbsp;WINDOWS SERVER 2000, 2003, 2008 and more</option>
			
				<option value="35">Giao lưu - Giải trí</option>
			
				<option value="36">&nbsp; &nbsp;Giao lưu</option>
			
				<option value="37">&nbsp; &nbsp;Tuyển dụng</option>
			
				<option value="38">&nbsp; &nbsp;Tìm việc</option>
			
			</select>
			<input value="Chuyển" class="button2" type="submit">
		</fieldset>
	</form>


	<div id="wgo" class="collapse wgo_block block">
		<h2 class="blockhead"><a href="">Đang trực tuyến</a></h2>
		<div class="blockbody formcontrols floatcontainer">
			<div id="wgo_onlineusers" class="wgo_subblock section">
				<div class="padding-l-10">
					<p>Đang xem chuyên mục này: <strong>Không có thành viên nào trực tuyến.</strong> và <strong>1</strong> khách.</p>
				</div>
			</div>
		</div><b><b>
	</b></b></div>
</div>
<link href="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/tipTip.css" rel="stylesheet" type="text/css" media="screen">
<script type="text/javascript" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/jquery_015.js"></script>
<script type="text/javascript" charset="utf-8">
$(function(){
  	$("a[title]").tipTip({maxWidth:"300px"});
	$("img[title]").tipTip({maxWidth:"300px"});
    /* $("input[title]").tipTip({maxWidth:"300px"}); */
    $("dt[title]").tipTip({maxWidth:"300px"});
	$("blockquote[title]").tipTip({maxWidth:"300px"});
	$("div[title]").tipTip({maxWidth:"300px"});
});
</script>
<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home icon-home-over"><a href="http://www.zend.vn/forum/?sid=4cc54eed1d94bcda1299a860f09c0627" accesskey="h">Trang chủ</a></li>
				
			<li class="rightside"><a href="http://www.zend.vn/forum/memberlist.php?mode=leaders&amp;sid=4cc54eed1d94bcda1299a860f09c0627">Ban điều hành</a> • <a href="http://www.zend.vn/forum/ucp.php?mode=delete_cookies&amp;sid=4cc54eed1d94bcda1299a860f09c0627">Xóa hết cookie</a> • Múi giờ UTC + 7 Giờ </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>
	
<!--
	We request you retain the full copyright notice below including the link to www.phpbb.com.
	This not only gives respect to the large amount of time given freely by the developers
	but also helps build interest, traffic and use of phpBB3. If you (honestly) cannot retain
	the full copyright we ask you at least leave in place the "Powered by phpBB" line, with
	"phpBB" linked to www.phpbb.com. If you refuse to include even this then support on our
	forums may be affected.

	The phpBB Group : 2006
//-->

	<div class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a> © 2000, 2002, 2005, 2007, 2013<br>ZVN theme - Designed by <a href="http://www.zend.vn/">ZVN group</a>

		<!-- <br />Powered by <a href="http://phpbbsocialnetwork.com/" title="phpBB Social Network" onclick="window.open(this.href); return false;">phpBB Social Network</a> &copy; phpBB SN Group<br />Vietnamese translation --><br><!-- <br />SEO MOD &copy; 2007 <a href="http://startrekguide.com">StarTrekGuide</a> -->
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
</div>






<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-11600391-1");
pageTracker._trackPageview();
} catch(err) {}</script>

<a href="http://getclicky.com/151625"><img alt="Web Analytics" src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/badge.gif" border="0" height="0px" width="0px"></a>
<script src="%5BTutorial%5DT%E1%BA%A1o%20category,%20menu%20%C4%91a%20c%E1%BA%A5p%20v%E1%BB%9Bi%20c%E1%BA%A5u%20tr%C3%BAc%20c%C3%A2y%20_%20Zend%20Framework%20_%20PHP%20Framework%20_%20Zend%20PHP%20_%20ZendVN%20_%20Open%20Source%20_%20Vietnam_files/js.js" type="text/javascript"></script>
<script type="text/javascript">clicky.init(151625);</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="http://static.getclicky.com/151625ns.gif" width="0px" height="0px"/></p></noscript>

<div aria-labelledby="ui-id-1" role="dialog" tabindex="-1" style="outline: 0px none; z-index: 1002; height: auto; width: 400px; top: 200.5px; left: 471.5px; display: none;" class="ui-dialog ui-widget ui-widget-content ui-corner-all sn-confirmBox ui-dialog-buttons"><div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"><span class="ui-dialog-title" id="ui-id-1">Title Confirm Box</span><a role="button" class="ui-dialog-titlebar-close ui-corner-all" href="#"><span class="ui-icon ui-icon-closethick">close</span></a></div><div scrollleft="0" scrolltop="0" style="width: auto; min-height: 62px; height: auto;" id="dialog" class="ui-body-dialog ui-dialog-content ui-widget-content">Content Confirm Box</div><div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"><div class="ui-dialog-buttonset"><button aria-disabled="false" role="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" type="button"><span class="ui-button-text">Close</span></button></div></div></div><div id="tiptip_holder" style="max-width:300px;"><div id="tiptip_arrow"><div id="tiptip_arrow_inner"></div></div><div id="tiptip_content"></div></div></body></html>